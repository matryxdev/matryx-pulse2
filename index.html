<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Matryx Pulse 2 - Explorateur du Syst√®me Solaire</title>
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
    }

    body {
      overflow: hidden;
      background-color: #000;
      color: #fff;
    }

    canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
    }

    .ui-container {
      position: fixed;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 10;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 16px;
    }

    .controls-container {
      display: flex;
      gap: 8px;
      background-color: rgba(0, 0, 0, 0.7);
      padding: 10px;
      border-radius: 8px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(0, 204, 255, 0.3);
      box-shadow: 0 0 20px rgba(0, 204, 255, 0.2);
    }

    .control-btn {
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      border: 1px solid rgba(0, 204, 255, 0.5);
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border-radius: 4px;
      backdrop-filter: blur(10px);
      transition: all 0.3s;
    }

    .control-btn:hover {
      background-color: rgba(0, 204, 255, 0.2);
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }

    .loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #000;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 100;
      transition: opacity 1s;
    }

    .loading-bar-container {
      width: 300px;
      height: 3px;
      background-color: #333;
      margin-top: 20px;
      border-radius: 3px;
      overflow: hidden;
    }

    .loading-bar {
      height: 100%;
      width: 0%;
      background-color: #00ccff;
      transition: width 0.5s;
    }

    .loading-text {
      font-size: 24px;
      margin-bottom: 10px;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: #00ccff;
    }

    .title-container {
      position: fixed;
      top: 40px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 10;
      text-align: center;
      transition: opacity 0.5s;
    }

    .title {
      font-size: 36px;
      font-weight: bold;
      letter-spacing: 3px;
      text-transform: uppercase;
      margin-bottom: 10px;
      color: #00ccff;
      text-shadow: 0 0 10px rgba(0, 204, 255, 0.5);
    }

    .subtitle {
      font-size: 18px;
      opacity: 0.7;
      letter-spacing: 1px;
    }

    .fps-counter {
      position: fixed;
      top: 10px;
      left: 10px;
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 5px 10px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 100;
      display: block;
    }
    
    .planet-info-panel {
      position: fixed;
      top: 50%;
      right: -400px;
      transform: translateY(-50%);
      width: 380px;
      max-height: 90vh;
      background-color: rgba(0, 0, 0, 0.8);
      border-left: 1px solid rgba(0, 204, 255, 0.5);
      padding: 20px;
      z-index: 1000;
      backdrop-filter: blur(10px);
      box-shadow: -5px 0 20px rgba(0, 204, 255, 0.3);
      transition: right 0.5s ease-in-out;
      overflow-y: auto;
    }
    
    .planet-info-panel.visible {
      right: 0;
    }
    
    .planet-info-header {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
      border-bottom: 1px solid rgba(0, 204, 255, 0.3);
      padding-bottom: 10px;
    }
    
    .planet-info-icon {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      margin-right: 15px;
      background-size: cover;
      background-position: center;
      border: 2px solid rgba(0, 204, 255, 0.5);
    }
    
    .planet-info-title {
      font-size: 24px;
      font-weight: bold;
      color: #fff;
    }
    
    .planet-info-content {
      margin-bottom: 20px;
    }
    
    .planet-info-stat {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      padding-bottom: 5px;
    }
    
    .planet-info-stat-label {
      color: rgba(0, 204, 255, 0.8);
      font-weight: bold;
    }
    
    .planet-info-stat-value {
      color: #fff;
    }
    
    .planet-info-description {
      line-height: 1.6;
      margin-bottom: 20px;
      color: rgba(255, 255, 255, 0.8);
    }
    
    .planet-info-close {
      position: absolute;
      top: 10px;
      right: 10px;
      background: none;
      border: none;
      color: rgba(255, 255, 255, 0.7);
      font-size: 20px;
      cursor: pointer;
      transition: color 0.3s;
    }
    
    .planet-info-close:hover {
      color: #fff;
    }
    
    .planet-label {
      position: absolute;
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 5px 10px;
      border-radius: 4px;
      font-size: 12px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s;
      z-index: 20;
      border: 1px solid rgba(0, 204, 255, 0.5);
    }

    .scale-info {
      position: fixed;
      bottom: 100px;
      left: 20px;
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 10px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 10;
      border: 1px solid rgba(0, 204, 255, 0.5);
      transition: opacity 0.3s;
    }

    .scale-info h3 {
      color: #00ccff;
      margin-bottom: 5px;
    }

    .scale-info p {
      margin: 3px 0;
    }
    
    .planet-comparison {
      position: fixed;
      bottom: -200px;
      left: 50%;
      transform: translateX(-50%);
      width: 80%;
      max-width: 1200px;
      height: 180px;
      background-color: rgba(0, 0, 0, 0.7);
      border-top: 1px solid rgba(0, 204, 255, 0.5);
      padding: 15px;
      z-index: 1000;
      backdrop-filter: blur(10px);
      box-shadow: 0 -5px 20px rgba(0, 204, 255, 0.3);
      transition: bottom 0.5s ease-in-out;
      display: flex;
      flex-direction: column;
    }
    
    .planet-comparison.visible {
      bottom: 0;
    }
    
    .planet-comparison-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    
    .planet-comparison-title {
      font-size: 18px;
      font-weight: bold;
      color: #00ccff;
    }
    
    .planet-comparison-close {
      background: none;
      border: none;
      color: rgba(255, 255, 255, 0.7);
      font-size: 20px;
      cursor: pointer;
      transition: color 0.3s;
    }
    
    .planet-comparison-close:hover {
      color: #fff;
    }
    
    .planet-comparison-content {
      display: flex;
      align-items: flex-end;
      height: 120px;
      overflow-x: auto;
      padding-bottom: 10px;
    }
    
    .planet-comparison-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-right: 20px;
      min-width: 60px;
    }
    
    .planet-comparison-sphere {
      background-size: cover;
      border-radius: 50%;
      margin-bottom: 5px;
    }
    
    .planet-comparison-name {
      font-size: 12px;
      text-align: center;
      color: white;
    }
    
    .tooltip {
      position: absolute;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 8px 12px;
      border-radius: 4px;
      font-size: 14px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s;
      z-index: 1000;
      border: 1px solid rgba(0, 204, 255, 0.5);
      max-width: 200px;
    }
    
    .feature-buttons {
      position: fixed;
      top: 20px;
      right: 20px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      z-index: 10;
    }
    
    .feature-btn {
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      border: 1px solid rgba(0, 204, 255, 0.5);
      padding: 8px 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border-radius: 4px;
      backdrop-filter: blur(10px);
      transition: all 0.3s;
      font-size: 14px;
    }
    
    .feature-btn:hover {
      background-color: rgba(0, 204, 255, 0.2);
      transform: translateX(-3px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }
    
    .feature-btn svg {
      margin-right: 8px;
    }
    
    .atmosphere-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      border: 1px solid rgba(0, 204, 255, 0.5);
      padding: 8px 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border-radius: 4px;
      backdrop-filter: blur(10px);
      transition: all 0.3s;
      font-size: 14px;
      z-index: 10;
    }
    
    .atmosphere-toggle:hover {
      background-color: rgba(0, 204, 255, 0.2);
    }
    
    .zoom-instructions {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 20px;
      border-radius: 8px;
      font-size: 16px;
      z-index: 1000;
      border: 1px solid rgba(0, 204, 255, 0.5);
      text-align: center;
      opacity: 0;
      transition: opacity 0.5s;
      pointer-events: none;
    }
    
    .zoom-instructions.visible {
      opacity: 1;
    }
    
    .zoom-instructions h3 {
      color: #00ccff;
      margin-bottom: 10px;
    }
    
    .zoom-instructions p {
      margin-bottom: 15px;
    }
    
    .time-controls {
      position: fixed;
      bottom: 100px;
      right: 20px;
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 10px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 10;
      border: 1px solid rgba(0, 204, 255, 0.5);
      display: flex;
      flex-direction: column;
      gap: 5px;
    }
    
    .time-controls h3 {
      color: #00ccff;
      margin-bottom: 5px;
      font-size: 14px;
    }
    
    .time-slider {
      width: 100%;
      margin: 5px 0;
    }
    
    .time-buttons {
      display: flex;
      justify-content: space-between;
    }
    
    .time-btn {
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      border: 1px solid rgba(0, 204, 255, 0.5);
      padding: 5px;
      cursor: pointer;
      border-radius: 4px;
      font-size: 12px;
      transition: all 0.3s;
    }
    
    .time-btn:hover {
      background-color: rgba(0, 204, 255, 0.2);
    }

    /* Nouveaux styles pour les effets visuels am√©lior√©s */
    .planet-glow {
      position: absolute;
      border-radius: 50%;
      pointer-events: none;
      filter: blur(10px);
      opacity: 0.5;
      background-color: rgba(0, 204, 255, 0.3);
      transition: all 0.5s ease;
    }

    .planet-info-image-gallery {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      margin-top: 15px;
      margin-bottom: 15px;
    }

    .planet-info-image {
      width: calc(50% - 5px);
      height: 120px;
      background-size: cover;
      background-position: center;
      border-radius: 4px;
      cursor: pointer;
      transition: transform 0.3s;
    }

    .planet-info-image:hover {
      transform: scale(1.05);
    }

    .planet-info-tabs {
      display: flex;
      border-bottom: 1px solid rgba(0, 204, 255, 0.3);
      margin-bottom: 15px;
    }

    .planet-info-tab {
      padding: 8px 12px;
      cursor: pointer;
      color: rgba(255, 255, 255, 0.7);
      transition: all 0.3s;
    }

    .planet-info-tab.active {
      color: #00ccff;
      border-bottom: 2px solid #00ccff;
    }

    .planet-info-tab:hover {
      color: white;
    }

    .planet-info-tab-content {
      display: none;
    }

    .planet-info-tab-content.active {
      display: block;
    }

    .planet-info-button {
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      border: 1px solid rgba(0, 204, 255, 0.5);
      padding: 8px 12px;
      display: inline-block;
      cursor: pointer;
      border-radius: 4px;
      margin-top: 10px;
      transition: all 0.3s;
      text-align: center;
    }

    .planet-info-button:hover {
      background-color: rgba(0, 204, 255, 0.2);
    }

    .planet-info-progress {
      height: 4px;
      background-color: rgba(255, 255, 255, 0.1);
      margin: 5px 0;
      border-radius: 2px;
      overflow: hidden;
    }

    .planet-info-progress-bar {
      height: 100%;
      background-color: #00ccff;
    }

    .planet-info-fact {
      margin-bottom: 10px;
      padding: 8px;
      background-color: rgba(0, 204, 255, 0.1);
      border-radius: 4px;
      font-style: italic;
    }

    .planet-info-fact::before {
      content: "‚Ä¢ ";
      color: #00ccff;
    }

    .notification {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 10px 20px;
      border-radius: 4px;
      font-size: 14px;
      z-index: 1000;
      border: 1px solid rgba(0, 204, 255, 0.5);
      opacity: 0;
      transition: opacity 0.3s;
      pointer-events: none;
    }

    .notification.visible {
      opacity: 1;
    }

    /* Animation de pulsation pour les √©toiles */
    @keyframes pulse {
      0% { opacity: 0.7; }
      50% { opacity: 1; }
      100% { opacity: 0.7; }
    }

    .pulse-animation {
      animation: pulse 3s infinite;
    }

    /* Animation de rotation pour les plan√®tes */
    @keyframes rotate {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Animation de flottement pour les √©l√©ments UI */
    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-5px); }
      100% { transform: translateY(0px); }
    }

    .float-animation {
      animation: float 4s ease-in-out infinite;
    }

    /* Styles pour la galerie d'images en plein √©cran */
    .fullscreen-gallery {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.9);
      z-index: 2000;
      display: none;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }

    .fullscreen-gallery.visible {
      display: flex;
    }

    .gallery-image {
      max-width: 80%;
      max-height: 80vh;
      border-radius: 4px;
      box-shadow: 0 0 30px rgba(0, 204, 255, 0.3);
    }

    .gallery-controls {
      display: flex;
      justify-content: center;
      margin-top: 20px;
      gap: 20px;
    }

    .gallery-btn {
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      border: 1px solid rgba(0, 204, 255, 0.5);
      padding: 8px 16px;
      cursor: pointer;
      border-radius: 4px;
      font-size: 14px;
      transition: all 0.3s;
    }

    .gallery-btn:hover {
      background-color: rgba(0, 204, 255, 0.2);
    }

    .gallery-close {
      position: absolute;
      top: 20px;
      right: 20px;
      background: none;
      border: none;
      color: white;
      font-size: 30px;
      cursor: pointer;
      transition: color 0.3s;
    }

    .gallery-close:hover {
      color: #00ccff;
    }

    .gallery-caption {
      color: white;
      margin-top: 10px;
      font-size: 14px;
      text-align: center;
      max-width: 80%;
    }

    /* Styles pour les effets de particules */
    .particle-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 5;
    }

    .particle {
      position: absolute;
      background-color: white;
      border-radius: 50%;
      opacity: 0;
      animation: particle-fade 3s ease-out infinite;
    }

    @keyframes particle-fade {
      0% { opacity: 0; transform: translateY(0); }
      10% { opacity: 0.8; }
      100% { opacity: 0; transform: translateY(-20px); }
    }
  </style>
</head>
<body>
  <div class="loading-screen" id="loading-screen">
    <div class="loading-text">INITIALISATION</div>
    <div class="loading-bar-container">
      <div class="loading-bar" id="loading-bar"></div>
    </div>
  </div>

  <div class="title-container" id="title-container">
    <h1 class="title">MATRYX PULSE 2</h1>
    <p class="subtitle">Exploration du syst√®me solaire</p>
  </div>

  <div class="fps-counter" id="fps-counter">FPS: 60</div>

  <canvas id="canvas"></canvas>
  
  <div class="ui-container">
    <div class="controls-container">
      <button id="rotate-toggle" class="control-btn" title="Activer/d√©sactiver la rotation automatique">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path>
          <path d="M3 3v5h5"></path>
        </svg>
      </button>
      <button id="reset-camera" class="control-btn" title="R√©initialiser la cam√©ra">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
      </button>
      <button id="compare-toggle" class="control-btn" title="Comparer les tailles des plan√®tes">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8"></circle>
          <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          <line x1="8" y1="11" x2="14" y2="11"></line>
        </svg>
      </button>
      <button id="fullscreen-toggle" class="control-btn" title="Plein √©cran">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M8 3H5a2 2 0 0 0-2 2v3"></path>
          <path d="M21 8V5a2 2 0 0 0-2-2h-3"></path>
          <path d="M3 16v3a2 2 0 0 0 2 2h3"></path>
          <path d="M16 21h3a2 2 0 0 0 2-2v-3"></path>
        </svg>
      </button>
    </div>
  </div>
  
  <div class="feature-buttons">
    <button id="realistic-toggle" class="feature-btn">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="2" y1="12" x2="22" y2="12"></line>
        <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
      </svg>
      √âchelle r√©aliste
    </button>
    <button id="orbit-lines-toggle" class="feature-btn">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10"></circle>
        <circle cx="12" cy="12" r="6"></circle>
        <circle cx="12" cy="12" r="2"></circle>
      </svg>
      Orbites
    </button>
    <button id="reset-all" class="feature-btn">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
      </svg>
      R√©initialiser
    </button>
  </div>
  
  <button id="atmosphere-toggle" class="atmosphere-toggle">
    Atmosph√®res
  </button>
  
  <div class="scale-info" id="scale-info">
    <h3>√âchelle du mod√®le</h3>
    <p>Distances: 1 UA = <span id="distance-scale">10</span> unit√©s</p>
    <p>Tailles: 1 Terre = <span id="size-scale">1</span> unit√©</p>
    <p><small>Note: Les tailles des plan√®tes sont exag√©r√©es pour la visibilit√©</small></p>
  </div>
  
  <div class="time-controls" id="time-controls">
    <h3>Vitesse de simulation</h3>
    <input type="range" id="time-slider" class="time-slider" min="0" max="100" value="50">
    <div class="time-buttons">
      <button id="time-slower" class="time-btn">Plus lent</button>
      <button id="time-reset" class="time-btn">Normal</button>
      <button id="time-faster" class="time-btn">Plus rapide</button>
    </div>
  </div>
  
  <div class="planet-info-panel" id="planet-info-panel">
    <button class="planet-info-close" id="planet-info-close">√ó</button>
    <div class="planet-info-header">
      <div class="planet-info-icon" id="planet-info-icon"></div>
      <h2 class="planet-info-title" id="planet-info-title">Nom de la plan√®te</h2>
    </div>
    
    <div class="planet-info-tabs">
      <div class="planet-info-tab active" data-tab="general">G√©n√©ral</div>
      <div class="planet-info-tab" data-tab="details">D√©tails</div>
      <div class="planet-info-tab" data-tab="gallery">Galerie</div>
    </div>
    
    <div class="planet-info-tab-content active" id="tab-general">
      <div class="planet-info-content" id="planet-info-content">
        <div class="planet-info-stat">
          <span class="planet-info-stat-label">Distance du Soleil:</span>
          <span class="planet-info-stat-value" id="planet-info-distance">0 million km</span>
        </div>
        <div class="planet-info-stat">
          <span class="planet-info-stat-label">Diam√®tre:</span>
          <span class="planet-info-stat-value" id="planet-info-diameter">0 km</span>
        </div>
        <div class="planet-info-stat">
          <span class="planet-info-stat-label">P√©riode orbitale:</span>
          <span class="planet-info-stat-value" id="planet-info-revolution">0 jours</span>
        </div>
        <div class="planet-info-stat">
          <span class="planet-info-stat-label">P√©riode de rotation:</span>
          <span class="planet-info-stat-value" id="planet-info-rotation">0 heures</span>
        </div>
        <div class="planet-info-stat">
          <span class="planet-info-stat-label">Temp√©rature moyenne:</span>
          <span class="planet-info-stat-value" id="planet-info-temperature">0¬∞C</span>
        </div>
        <div class="planet-info-stat">
          <span class="planet-info-stat-label">Nombre de satellites:</span>
          <span class="planet-info-stat-value" id="planet-info-moons">0</span>
        </div>
        <div class="planet-info-stat">
          <span class="planet-info-stat-label">Masse (Terre = 1):</span>
          <span class="planet-info-stat-value" id="planet-info-mass">0</span>
        </div>
        <div class="planet-info-stat">
          <span class="planet-info-stat-label">Gravit√© (Terre = 1):</span>
          <span class="planet-info-stat-value" id="planet-info-gravity">0</span>
        </div>
        <div class="planet-info-stat">
          <span class="planet-info-stat-label">Vitesse d'√©chappement:</span>
          <span class="planet-info-stat-value" id="planet-info-escape">0 km/s</span>
        </div>
      </div>
      <div class="planet-info-description" id="planet-info-description">
        Description de la plan√®te...
      </div>
      <div class="planet-info-fact" id="planet-info-fact">
        Fait int√©ressant sur la plan√®te...
      </div>
    </div>
    
    <div class="planet-info-tab-content" id="tab-details">
      <div id="planet-info-features">
        <!-- Les caract√©ristiques de la plan√®te seront ajout√©es ici dynamiquement -->
      </div>
      <div class="planet-info-stat">
        <span class="planet-info-stat-label">Composition atmosph√©rique:</span>
        <span class="planet-info-stat-value" id="planet-info-atmosphere">N/A</span>
      </div>
      <div class="planet-info-stat">
        <span class="planet-info-stat-label">√Çge estim√©:</span>
        <span class="planet-info-stat-value" id="planet-info-age">4.5 milliards d'ann√©es</span>
      </div>
      <div class="planet-info-stat">
        <span class="planet-info-stat-label">Distance de la Terre:</span>
        <span class="planet-info-stat-value" id="planet-info-earth-distance">0 million km</span>
      </div>
      <div class="planet-info-stat">
        <span class="planet-info-stat-label">Inclinaison de l'axe:</span>
        <span class="planet-info-stat-value" id="planet-info-axial-tilt">0¬∞</span>
      </div>
      <div class="planet-info-stat">
        <span class="planet-info-stat-label">Excentricit√© orbitale:</span>
        <span class="planet-info-stat-value" id="planet-info-eccentricity">0</span>
      </div>
    </div>
    
    <div class="planet-info-tab-content" id="tab-gallery">
      <div class="planet-info-image-gallery" id="planet-info-gallery">
        <!-- Les images de la plan√®te seront ajout√©es ici dynamiquement -->
      </div>
    </div>
    
    <div class="planet-info-button" id="planet-explore-button">
      Explorer en d√©tail
    </div>
  </div>
  
  <div class="planet-comparison" id="planet-comparison">
    <div class="planet-comparison-header">
      <div class="planet-comparison-title">Comparaison des tailles des plan√®tes</div>
      <button class="planet-comparison-close" id="planet-comparison-close">√ó</button>
    </div>
    <div class="planet-comparison-content" id="planet-comparison-content">
      <!-- Les √©l√©ments de comparaison des plan√®tes seront ajout√©s ici dynamiquement -->
    </div>
  </div>
  
  <div class="planet-label" id="planet-label"></div>
  
  <div class="tooltip" id="tooltip"></div>
  
  <div class="zoom-instructions" id="zoom-instructions">
    <h3>Zoom interactif activ√©</h3>
    <p>Cliquez sur n'importe quelle plan√®te pour zoomer et voir des informations d√©taill√©es.</p>
    <p>Appuyez sur √âCHAP ou cliquez sur le bouton de fermeture pour revenir √† la vue normale.</p>
  </div>

  <div class="notification" id="notification">Notification</div>
  
  <div class="fullscreen-gallery" id="fullscreen-gallery">
    <button class="gallery-close" id="gallery-close">√ó</button>
    <img src="/placeholder.svg" alt="Image plan√©taire" class="gallery-image" id="gallery-image">
    <div class="gallery-caption" id="gallery-caption"></div>
    <div class="gallery-controls">
      <button class="gallery-btn" id="gallery-prev">Pr√©c√©dent</button>
      <button class="gallery-btn" id="gallery-next">Suivant</button>
    </div>
  </div>

  <div class="particle-container" id="particle-container"></div>

  <!-- Chargement des biblioth√®ques -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.134.0/examples/js/controls/OrbitControls.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.134.0/examples/js/postprocessing/EffectComposer.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.134.0/examples/js/postprocessing/RenderPass.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.134.0/examples/js/postprocessing/UnrealBloomPass.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.134.0/examples/js/postprocessing/ShaderPass.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.134.0/examples/js/shaders/CopyShader.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.134.0/examples/js/shaders/LuminosityHighPassShader.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.134.0/examples/js/loaders/GLTFLoader.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.11.4/dist/gsap.min.js"></script>
  
  <script>
    /**
     * Matryx Pulse 2 - Explorateur du Syst√®me Solaire
     * 
     * Une visualisation 3D compl√®te de notre syst√®me solaire avec des fonctionnalit√©s interactives,
     * des textures r√©alistes, des informations √©ducatives et des performances optimis√©es.
     * 
     * Fonctionnalit√©s:
     * - Zoom interactif sur les plan√®tes avec transitions fluides de cam√©ra
     * - Panneau d'information d√©taill√© pour chaque plan√®te
     * - Textures haute qualit√© et effets atmosph√©riques
     * - √âclairage et ombres r√©alistes
     * - Outil de comparaison des tailles des plan√®tes
     * - Vitesse de simulation personnalisable
     * - Optimisation des performances pour diff√©rents appareils
     * - Design responsive pour tous les formats d'√©cran
     * - Animation de d√©-zoom fluide lors de la fermeture des informations
     */
    
    // Variables globales
    let scene, camera, renderer, controls, composer;
    let autoRotate = true;
    let objects = {};
    let planets = {};
    let atmospheres = {};
    let planetLabels = {};
    let orbitLines = {};
    let clock = new THREE.Clock();
    let mouse = new THREE.Vector2();
    let raycaster = new THREE.Raycaster();
    let loadingScreen = document.getElementById('loading-screen');
    let loadingBar = document.getElementById('loading-bar');
    let fpsCounter = document.getElementById('fps-counter');
    let frameCount = 0;
    let lastTime = 0;
    let fps = 60;
    let textureCache = {};
    let geometryCache = {};
    let materialCache = {};
    let isLowPerformance = false;
    let isInitialized = false;
    let planetInfoPanel = document.getElementById('planet-info-panel');
    let planetLabel = document.getElementById('planet-label');
    let tooltip = document.getElementById('tooltip');
    let planetComparison = document.getElementById('planet-comparison');
    let notification = document.getElementById('notification');
    let fullscreenGallery = document.getElementById('fullscreen-gallery');
    let galleryImage = document.getElementById('gallery-image');
    let galleryCaption = document.getElementById('gallery-caption');
    let hoveredPlanet = null;
    let zoomTarget = null;
    let isZooming = false;
    let showLabels = true;
    let showOrbitLines = true;
    let showAtmospheres = true;
    let isRealisticScale = false;
    let timeScale = 1.0;
    let originalDistanceScale = 10;
    let originalSizeScale = 0.005 * 50;
    let zoomInstructions = document.getElementById('zoom-instructions');
    let titleContainer = document.getElementById('title-container');
    let scaleInfo = document.getElementById('scale-info');
    let timeControls = document.getElementById('time-controls');
    let initialCameraPosition = new THREE.Vector3(0, 50, 100);
    let initialControlsTarget = new THREE.Vector3(0, 0, 0);
    let dezoomInProgress = false;
    let currentGalleryIndex = 0;
    let currentGalleryImages = [];
    
    // Constantes d'√©chelle
    const DISTANCE_SCALE = 10; // 1 UA = 10 unit√©s 3D
    const SIZE_SCALE_BASE = 0.005; // √âchelle de base pour les tailles des plan√®tes
    const SIZE_EXAGGERATION = 50; // Facteur d'exag√©ration pour rendre les plan√®tes visibles
    const REALISTIC_DISTANCE_SCALE = 50; // √âchelle de distance plus r√©aliste
    const REALISTIC_SIZE_EXAGGERATION = 10; // Moins d'exag√©ration pour plus de r√©alisme
    
    // Mettre √† jour l'affichage de l'√©chelle
    document.getElementById('distance-scale').textContent = DISTANCE_SCALE;
    document.getElementById('size-scale').textContent = SIZE_SCALE_BASE * SIZE_EXAGGERATION;
    
    // Donn√©es des plan√®tes am√©lior√©es avec des informations scientifiques suppl√©mentaires et des textures haute r√©solution
    const planetData = {
      sun: {
        name: "Soleil",
        distance: 0,
        diameter: 1392700, // km
        revolutionPeriod: 0,
        rotationPeriod: 609.6, // heures
        temperature: 5500, // ¬∞C (surface)
        moons: 0,
        mass: 333000, // masses terrestres
        gravity: 27.9, // gravit√© terrestre
        escapeVelocity: 617.5, // km/s
        color: 0xffdd44,
        textureUrl: "https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/planets/sun.jpg",
        size: 109, // Taille relative √† la Terre
        axialTilt: 7.25, // degr√©s
        eccentricity: 0,
        atmosphere: "Hydrog√®ne (74%), H√©lium (24%), autres √©l√©ments (2%)",
        description: "Le Soleil est l'√©toile au centre de notre syst√®me solaire. C'est une sph√®re presque parfaite de plasma chaud, chauff√©e √† incandescence par des r√©actions de fusion nucl√©aire dans son noyau. Le Soleil rayonne de l'√©nergie principalement sous forme de lumi√®re, de rayonnement ultraviolet et infrarouge, et constitue la source d'√©nergie la plus importante pour la vie sur Terre.",
        features: [
          "Temp√©rature du noyau: ~15 millions ¬∞C",
          "Caract√©ristiques de surface: taches solaires, √©ruptions solaires, protub√©rances",
          "Composition: 74% hydrog√®ne, 24% h√©lium, 2% autres √©l√©ments",
          "√Çge: ~4,6 milliards d'ann√©es"
        ],
        fact: "Le Soleil repr√©sente 99,86% de la masse totale du syst√®me solaire.",
        gallery: [
          {
            url: "https://sdo.gsfc.nasa.gov/assets/img/latest/latest_1024_0171.jpg",
            caption: "Image du Soleil captur√©e par le Solar Dynamics Observatory (SDO) de la NASA"
          },
          {
            url: "https://soho.nascom.nasa.gov/data/LATEST/current_eit_171.gif",
            caption: "Vue du Soleil en ultraviolet extr√™me montrant la couronne solaire"
          },
          {
            url: "https://svs.gsfc.nasa.gov/vis/a010000/a013000/a013077/print.jpg",
            caption: "√âruption solaire captur√©e par le SDO"
          },
          {
            url: "https://www.nasa.gov/sites/default/files/thumbnails/image/pia17669-1041.jpg",
            caption: "D√©tail de la surface solaire montrant des r√©gions actives"
          }
        ]
      },
      mercury: {
        name: "Mercure",
        distance: 0.39, // UA (Unit√© Astronomique)
        diameter: 4879, // km
        revolutionPeriod: 88, // jours
        rotationPeriod: 1408, // heures
        temperature: 167, // ¬∞C (moyenne)
        moons: 0,
        mass: 0.055, // masses terrestres
        gravity: 0.38, // gravit√© terrestre
        escapeVelocity: 4.3, // km/s
        color: 0xaaaaaa,
        textureUrl: "https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/planets/mercury.jpg",
        size: 0.383, // Taille relative √† la Terre
        axialTilt: 0.03, // degr√©s
        eccentricity: 0.205,
        atmosphere: "Extr√™mement fine, principalement oxyg√®ne, sodium, hydrog√®ne, h√©lium",
        description: "Mercure est la plan√®te la plus proche du Soleil et la plus petite du syst√®me solaire. Son orbite autour du Soleil dure 87,97 jours terrestres, la plus courte de toutes les plan√®tes. Mercure tourne d'une mani√®re unique dans le syst√®me solaire. Elle est en r√©sonance spin-orbite 3:2 avec le Soleil, ce qui signifie que par rapport aux √©toiles fixes, elle tourne sur son axe exactement trois fois pour chaque deux r√©volutions qu'elle effectue autour du Soleil.",
        features: [
          "Surface: Fortement crat√©ris√©e, similaire √† la Lune",
          "Atmosph√®re: Extr√™mement fine, compos√©e principalement d'oxyg√®ne, de sodium, d'hydrog√®ne, d'h√©lium",
          "Champ magn√©tique: Faible, environ 1% de celui de la Terre",
          "Variations extr√™mes de temp√©rature: -173¬∞C √† 427¬∞C"
        ],
        fact: "Un jour sur Mercure (du lever au coucher du Soleil) dure 176 jours terrestres.",
        gallery: [
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA11245.jpg",
            caption: "Image en couleur am√©lior√©e de Mercure par la sonde MESSENGER"
          },
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA16853.jpg",
            caption: "Carte globale de Mercure montrant ses nombreux crat√®res"
          },
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA16388.jpg",
            caption: "Vue du bassin Caloris, l'une des plus grandes structures d'impact sur Mercure"
          },
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA19410.jpg",
            caption: "Image en fausses couleurs montrant les diff√©rentes compositions de la surface de Mercure"
          }
        ]
      },
      venus: {
        name: "V√©nus",
        distance: 0.72,
        diameter: 12104,
        revolutionPeriod: 225,
        rotationPeriod: 5832,
        temperature: 464,
        moons: 0,
        mass: 0.815, // masses terrestres
        gravity: 0.91, // gravit√© terrestre
        escapeVelocity: 10.4, // km/s
        color: 0xffd085,
        textureUrl: "https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/planets/venus_atmosphere.jpg",
        size: 0.949,
        axialTilt: 177.3, // degr√©s (rotation r√©trograde)
        eccentricity: 0.007,
        atmosphere: "96% dioxyde de carbone, 3.5% azote, acide sulfurique",
        hasAtmosphere: true,
        atmosphereColor: 0xffd085,
        description: "V√©nus est la deuxi√®me plan√®te √† partir du Soleil et la plus proche voisine plan√©taire de la Terre. C'est l'une des quatre plan√®tes int√©rieures et terrestres, et elle est souvent appel√©e la jumelle de la Terre en raison de sa taille et de sa densit√© similaires. V√©nus poss√®de une atmosph√®re dense et toxique remplie de dioxyde de carbone et de nuages d'acide sulfurique. L'atmosph√®re pi√®ge la chaleur dans un effet de serre extr√™me, faisant de V√©nus la plan√®te la plus chaude du syst√®me solaire avec des temp√©ratures de surface suffisamment √©lev√©es pour faire fondre le plomb.",
        features: [
          "Rotation r√©trograde: Tourne dans le sens oppos√© √† la plupart des plan√®tes",
          "Jour le plus long: Un jour v√©nusien est plus long que son ann√©e",
          "Pression de surface: 92 fois celle de la Terre",
          "Pas de champ magn√©tique malgr√© sa taille similaire √† celle de la Terre"
        ],
        fact: "V√©nus est la plan√®te la plus chaude du syst√®me solaire, bien qu'elle ne soit pas la plus proche du Soleil.",
        gallery: [
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA00072.jpg",
            caption: "Image globale de V√©nus par la mission Magellan utilisant des donn√©es radar"
          },
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA00084.jpg",
            caption: "Vue h√©misph√©rique de V√©nus montrant ses formations de surface"
          },
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA00149.jpg",
            caption: "Vue 3D de Maxwell Montes, la plus haute montagne sur V√©nus"
          },
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA00104.jpg",
            caption: "Vue radar de l'h√©misph√®re nord de V√©nus"
          }
        ]
      },
      earth: {
        name: "Terre",
        distance: 1,
        diameter: 12742,
        revolutionPeriod: 365.25,
        rotationPeriod: 24,
        temperature: 15,
        moons: 1,
        mass: 1, // masses terrestres
        gravity: 1, // gravit√© terrestre
        escapeVelocity: 11.2, // km/s
        color: 0x2233ff,
        textureUrl: "https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/planets/earth_atmos_2048.jpg",
        cloudsUrl: "https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/planets/earth_clouds_1024.png",
        size: 1,
        axialTilt: 23.44, // degr√©s
        eccentricity: 0.017,
        atmosphere: "78% azote, 21% oxyg√®ne, 1% argon, 0.04% dioxyde de carbone",
        hasAtmosphere: true,
        atmosphereColor: 0x6699ff,
        description: "La Terre est la troisi√®me plan√®te √† partir du Soleil et le seul objet astronomique connu pour abriter la vie. Environ 71% de la surface de la Terre est couverte d'eau, principalement par des oc√©ans. Les 29% restants sont des terres constitu√©es de continents et d'√Æles. L'atmosph√®re terrestre est compos√©e d'azote (78%), d'oxyg√®ne (21%), d'argon (0,9%), de dioxyde de carbone (0,04%) et de gaz traces.",
        features: [
          "Seule plan√®te connue avec de l'eau liquide √† la surface",
          "Champ magn√©tique puissant qui prot√®ge du rayonnement solaire",
          "Tectoniquement active avec des continents en mouvement",
          "√âcosyst√®mes diversifi√©s soutenant des millions d'esp√®ces"
        ],
        fact: "La Terre est la seule plan√®te du syst√®me solaire dont le nom ne provient pas de la mythologie gr√©co-romaine.",
        gallery: [
          {
            url: "https://www.nasa.gov/sites/default/files/thumbnails/image/as17-148-22727_lrg.jpg",
            caption: "La c√©l√®bre photo 'Blue Marble' prise par l'√©quipage d'Apollo 17"
          },
          {
            url: "https://epic.gsfc.nasa.gov/archive/natural/2021/01/20/png/epic_1b_20210120003633.png",
            caption: "Image de la Terre prise par DSCOVR EPIC, montrant la plan√®te enti√®re"
          },
          {
            url: "https://www.nasa.gov/sites/default/files/thumbnails/image/as08-14-2383.jpg",
            caption: "Le 'lever de Terre' vu depuis l'orbite lunaire par Apollo 8"
          },
          {
            url: "https://eoimages.gsfc.nasa.gov/images/imagerecords/57000/57735/globe_east_540.jpg",
            caption: "Vue de l'Afrique et de l'Antarctique depuis l'espace"
          }
        ]
      },
      mars: {
        name: "Mars",
        distance: 1.52,
        diameter: 6779,
        revolutionPeriod: 687,
        rotationPeriod: 24.7,
        temperature: -65,
        moons: 2,
        mass: 0.107, // masses terrestres
        gravity: 0.38, // gravit√© terrestre
        escapeVelocity: 5.0, // km/s
        color: 0xff4500,
        textureUrl: "https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/planets/mars.jpg",
        size: 0.532,
        axialTilt: 25.19, // degr√©s
        eccentricity: 0.094,
        atmosphere: "95% dioxyde de carbone, 2.7% azote, 1.6% argon",
        hasAtmosphere: true,
        atmosphereColor: 0xd58b61,
        description: "Mars est la quatri√®me plan√®te √† partir du Soleil et la deuxi√®me plus petite plan√®te du syst√®me solaire, plus grande que Mercure seulement. Mars est souvent appel√©e la 'Plan√®te rouge' en raison de son apparence rouge√¢tre, due √† l'oxyde de fer (rouille) sur sa surface. Mars a une atmosph√®re mince compos√©e principalement de dioxyde de carbone, et poss√®de deux petites lunes de forme irr√©guli√®re: Phobos et Deimos.",
        features: [
          "Olympus Mons: Plus grand volcan du syst√®me solaire",
          "Valles Marineris: Plus grand syst√®me de canyons",
          "Calottes polaires compos√©es de glace d'eau et de dioxyde de carbone",
          "Preuves d'anciens fleuves et lacs √† la surface"
        ],
        fact: "Mars abrite le plus grand volcan du syst√®me solaire, Olympus Mons, qui fait environ 22 km de haut et 600 km de large.",
        gallery: [
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA22228.jpg",
            caption: "Paysage martien captur√© par le rover Curiosity"
          },
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA22486.jpg",
            caption: "Image en couleur r√©elle de Mars prise par le rover Curiosity"
          },
          {
            url: "https://mars.nasa.gov/system/resources/detail_files/9139_PIA21041-main.jpg",
            caption: "Vall√©e creus√©e par l'eau sur Mars"
          },
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA17944.jpg",
            caption: "Selfie du rover Curiosity sur Mars"
          }
        ]
      },
      jupiter: {
        name: "Jupiter",
        distance: 5.2,
        diameter: 139820,
        revolutionPeriod: 4333,
        rotationPeriod: 9.9,
        temperature: -110,
        moons: 79,
        mass: 317.8, // masses terrestres
        gravity: 2.53, // gravit√© terrestre
        escapeVelocity: 59.5, // km/s
        color: 0xf0c399,
        textureUrl: "https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/planets/jupiter.jpg",
        size: 11.209,
        axialTilt: 3.13, // degr√©s
        eccentricity: 0.049,
        atmosphere: "90% hydrog√®ne, 10% h√©lium, traces de m√©thane, ammoniac, vapeur d'eau",
        hasAtmosphere: true,
        atmosphereColor: 0xf0c399,
        description: "Jupiter est la cinqui√®me plan√®te √† partir du Soleil et la plus grande du syst√®me solaire. C'est une g√©ante gazeuse avec une masse plus de deux fois et demie sup√©rieure √† celle de toutes les autres plan√®tes du syst√®me solaire combin√©es, mais l√©g√®rement inf√©rieure √† un milli√®me de la masse du Soleil. Jupiter est principalement compos√©e d'hydrog√®ne, mais l'h√©lium constitue un quart de sa masse et un dixi√®me de son volume. La contraction continue de l'int√©rieur de Jupiter g√©n√®re plus de chaleur que la plan√®te n'en re√ßoit du Soleil.",
        features: [
          "Grande Tache Rouge: Une temp√™te anticyclonique persistante",
          "Champ magn√©tique le plus puissant de toutes les plan√®tes",
          "Syst√®me d'anneaux, beaucoup plus t√©nu que celui de Saturne",
          "Lunes galil√©ennes: Io, Europe, Ganym√®de et Callisto"
        ],
        fact: "La Grande Tache Rouge de Jupiter est une temp√™te qui dure depuis au moins 400 ans et qui pourrait contenir 2-3 plan√®tes de la taille de la Terre.",
        gallery: [
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA22946.jpg",
            caption: "Image de Jupiter prise par la sonde Juno"
          },
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA22335.jpg",
            caption: "Vue d√©taill√©e de la Grande Tache Rouge de Jupiter"
          },
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA25015.jpg",
            caption: "Temp√™tes et tourbillons dans l'atmosph√®re de Jupiter"
          },
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA24237.jpg",
            caption: "Image infrarouge de Jupiter montrant les diff√©rentes couches de son atmosph√®re"
          }
        ]
      },
      saturn: {
        name: "Saturne",
        distance: 9.54,
        diameter: 116460,
        revolutionPeriod: 10759,
        rotationPeriod: 10.7,
        temperature: -140,
        moons: 82,
        mass: 95.2, // masses terrestres
        gravity: 1.07, // gravit√© terrestre
        escapeVelocity: 35.5, // km/s
        color: 0xffd85c,
        textureUrl: "https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/planets/saturn.jpg",
        ringsUrl: "https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/planets/saturn_ring_alpha.png",
        size: 9.449,
        axialTilt: 26.73, // degr√©s
        eccentricity: 0.057,
        atmosphere: "96% hydrog√®ne, 3% h√©lium, traces de m√©thane et ammoniac",
        hasRings: true,
        hasAtmosphere: true,
        atmosphereColor: 0xffd85c,
        description: "Saturne est la sixi√®me plan√®te √† partir du Soleil et la deuxi√®me plus grande du syst√®me solaire, apr√®s Jupiter. C'est une g√©ante gazeuse avec un rayon moyen d'environ neuf fois et demie celui de la Terre. Saturne poss√®de un syst√®me d'anneaux pro√©minent qui se compose de neuf anneaux principaux continus et de trois arcs discontinus, compos√©s principalement de particules de glace avec une plus petite quantit√© de d√©bris rocheux et de poussi√®re.",
        features: [
          "Syst√®me d'anneaux le plus √©tendu de toutes les plan√®tes",
          "Densit√© la plus faible de toutes les plan√®tes du syst√®me solaire",
          "Titan: Plus grande lune avec une atmosph√®re √©paisse",
          "Motif nuageux hexagonal au p√¥le nord"
        ],
        fact: "Saturne est si peu dense qu'elle flotterait dans l'eau si l'on trouvait un oc√©an assez grand pour la contenir.",
        gallery: [
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA21046.jpg",
            caption: "Vue d√©taill√©e des anneaux de Saturne par la sonde Cassini"
          },
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA17218.jpg",
            caption: "L'hexagone au p√¥le nord de Saturne"
          },
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA12797.jpg",
            caption: "Image composite de Saturne et ses anneaux"
          },
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA21611.jpg",
            caption: "Vue des anneaux de Saturne lors du grand finale de Cassini"
          }
        ]
      },
      uranus: {
        name: "Uranus",
        distance: 19.2,
        diameter: 50724,
        revolutionPeriod: 30687,
        rotationPeriod: 17.2,
        temperature: -195,
        moons: 27,
        mass: 14.5, // masses terrestres
        gravity: 0.89, // gravit√© terrestre
        escapeVelocity: 21.3, // km/s
        color: 0x4fc3f7,
        textureUrl: "https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/planets/uranus.jpg",
        ringsUrl: "https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/planets/saturn_ring_alpha.png",
        size: 4.007,
        axialTilt: 97.77, // degr√©s (presque couch√© sur le c√¥t√©)
        eccentricity: 0.046,
        atmosphere: "83% hydrog√®ne, 15% h√©lium, 2% m√©thane",
        hasRings: true,
        hasAtmosphere: true,
        atmosphereColor: 0x4fc3f7,
        description: "Uranus est la septi√®me plan√®te √† partir du Soleil. Elle a le troisi√®me plus grand rayon plan√©taire et la quatri√®me plus grande masse plan√©taire du syst√®me solaire. Uranus est similaire en composition √† Neptune, et les deux ont des compositions chimiques globales qui diff√®rent de celles des g√©antes gazeuses plus grandes, Jupiter et Saturne. Pour cette raison, les scientifiques classent souvent Uranus et Neptune comme des 'g√©antes de glace' pour les distinguer des autres plan√®tes g√©antes.",
        features: [
          "Inclinaison axiale extr√™me: Tourne sur le c√¥t√© √† 98 degr√©s",
          "Atmosph√®re plan√©taire la plus froide du syst√®me solaire",
          "Syst√®me d'anneaux t√©nu d√©couvert en 1977",
          "Champ magn√©tique inclin√© √† 59¬∞ par rapport √† l'axe de rotation"
        ],
        fact: "Uranus est la seule plan√®te dont le nom est d√©riv√© de la mythologie grecque plut√¥t que romaine.",
        gallery: [
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA18182.jpg",
            caption: "Image d'Uranus prise par le t√©lescope spatial Hubble"
          },
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA01391.jpg",
            caption: "Vue d'Uranus par la sonde Voyager 2"
          },
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA02963.jpg",
            caption: "Image en infrarouge d'Uranus"
          },
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA01142.jpg",
            caption: "Image en fausses couleurs d'Uranus"
          }
        ]
      },
      neptune: {
        name: "Neptune",
        distance: 30.06,
        diameter: 49244,
        revolutionPeriod: 60190,
        rotationPeriod: 16.1,
        temperature: -200,
        moons: 14,
        mass: 17.1, // masses terrestres
        gravity: 1.14, // gravit√© terrestre
        escapeVelocity: 23.5, // km/s
        color: 0x3f51b5,
        textureUrl: "https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/planets/neptune.jpg",
        size: 3.883,
        axialTilt: 28.32, // degr√©s
        eccentricity: 0.010,
        atmosphere: "80% hydrog√®ne, 19% h√©lium, 1.5% m√©thane",
        hasAtmosphere: true,
        atmosphereColor: 0x3f51b5,
        description: "Neptune est la huiti√®me et la plus √©loign√©e plan√®te connue du syst√®me solaire. Dans le syst√®me solaire, c'est la quatri√®me plan√®te par diam√®tre, la troisi√®me plan√®te la plus massive et la g√©ante la plus dense. Neptune est 17 fois la masse de la Terre, l√©g√®rement plus massive que sa quasi-jumelle Uranus. Neptune est plus dense et physiquement plus petite qu'Uranus parce que sa plus grande masse cause plus de compression gravitationnelle de son atmosph√®re.",
        features: [
          "Grande Tache Sombre: Une temp√™te similaire √† la Grande Tache Rouge de Jupiter",
          "Vents les plus rapides du syst√®me solaire (jusqu'√† 2 100 km/h)",
          "Triton: Plus grande lune avec une orbite r√©trograde",
          "D√©couverte par pr√©dictions math√©matiques plut√¥t que par observation"
        ],
        fact: "Neptune a √©t√© d√©couverte par calcul math√©matique plut√¥t que par observation directe, apr√®s que des astronomes ont remarqu√© des perturbations dans l'orbite d'Uranus.",
        gallery: [
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA01492.jpg",
            caption: "Image globale de Neptune prise par Voyager 2"
          },
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA01142.jpg",
            caption: "La Grande Tache Sombre de Neptune"
          },
          {
            url: "https://www.nasa.gov/sites/default/files/thumbnails/image/pia01492-main.jpg",
            caption: "Vue globale de Neptune"
          },
          {
            url: "https://photojournal.jpl.nasa.gov/jpeg/PIA00046.jpg",
            caption: "Syst√®mes de temp√™tes dans l'atmosph√®re de Neptune"
          }
        ]
      }
    };
    
    /**
     * Fonction de d√©marrage de l'application
     * Initialise l'√©cran de chargement et commence l'application
     */
    function startApp() {
      console.log("D√©marrage de l'application...");
      
      // Afficher bri√®vement les instructions de zoom
      setTimeout(() => {
        zoomInstructions.classList.add('visible');
        setTimeout(() => {
          zoomInstructions.classList.remove('visible');
        }, 5000);
      }, 2000);
      
      // Simuler la progression du chargement
      let progress = 0;
      const loadingInterval = setInterval(() => {
        progress += 5;
        loadingBar.style.width = progress + '%';
        
        if (progress >= 100) {
          clearInterval(loadingInterval);
          
          // Attendre avant de masquer l'√©cran de chargement
          setTimeout(() => {
            console.log("Chargement termin√©, initialisation de la sc√®ne...");
            loadingScreen.style.opacity = '0';
            
            // Attendre la fin de la transition d'opacit√© avant de masquer
            setTimeout(() => {
              loadingScreen.style.display = 'none';
              
              // Initialiser la sc√®ne apr√®s que l'√©cran de chargement soit masqu√©
              if (!isInitialized) {
                isInitialized = true;
                init();
              }
            }, 1000);
          }, 500);
        }
      }, 100);
    }
    
    /**
     * D√©tection de performance
     * Teste les performances de l'appareil pour ajuster les param√®tres de qualit√©
     */
    function detectPerformance() {
      const testStart = performance.now();
      
      // Cr√©er une sc√®ne de test avec de nombreux objets
      const testScene = new THREE.Scene();
      const testCamera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
      const testRenderer = new THREE.WebGLRenderer({ antialias: false });
      testRenderer.setSize(256, 256);
      
      // Ajouter des objets de test
      for (let i = 0; i < 1000; i++) {
        const geometry = new THREE.BoxGeometry(1, 1, 1);
        const material = new THREE.MeshBasicMaterial({ color: 0xffffff });
        const mesh = new THREE.Mesh(geometry, material);
        mesh.position.set(
          Math.random() * 100 - 50,
          Math.random() * 100 - 50,
          Math.random() * 100 - 50
        );
        testScene.add(mesh);
      }
      
      // Rendre la sc√®ne de test
      testRenderer.render(testScene, testCamera);
      
      // Mesurer le temps
      const testEnd = performance.now();
      const testTime = testEnd - testStart;
      
      // Nettoyer
      testRenderer.dispose();
      
      // D√©terminer si l'appareil a des performances faibles
      isLowPerformance = testTime > 100; // Si le test prend plus de 100ms, consid√©rer comme faible performance
      
      console.log(`Test de performance: ${testTime.toFixed(2)}ms, Mode basse performance: ${isLowPerformance}`);
    }
    
    /**
     * Chargement de texture avec mise en cache
     * Charge et met en cache les textures pour am√©liorer les performances
     */
    function loadTexture(url) {
      if (textureCache[url]) {
        return textureCache[url];
      }
      
      // Pour la Terre, utiliser la texture externe qui fonctionne
      if (url.includes('earth')) {
        const loader = new THREE.TextureLoader();
        const texture = loader.load(url, 
          function(loadedTexture) {
            console.log(`Texture de la Terre charg√©e avec succ√®s: ${url}`);
          },
          undefined,
          function(err) {
            console.error(`Erreur lors du chargement de la texture de la Terre: ${url}`, err);
          }
        );
        textureCache[url] = texture;
        return texture;
      }
      
      // Pour toutes les autres plan√®tes, g√©n√©rer des textures localement
      // car les textures externes ne semblent pas fonctionner correctement
      console.log(`G√©n√©ration locale de texture pour: ${url}`);
      const texture = generateTexture(url);
      textureCache[url] = texture;
      return texture;
    }
    
    /**
     * G√©n√©ration de texture
     * Cr√©e une texture proc√©durale pour une plan√®te si la texture ne peut pas √™tre charg√©e
     */
    function generateTexture(url) {
      console.log(`G√©n√©ration d'une texture pour: ${url}`);
      const canvas = document.createElement('canvas');
      canvas.width = 1024;
      canvas.height = 1024;
      const ctx = canvas.getContext('2d');
      
      // D√©terminer quel type de texture g√©n√©rer
      if (url.includes('sun')) {
        // Texture du soleil - jaune orang√© avec des taches
        ctx.fillStyle = '#fff3b3'; // Base plus claire
        ctx.fillRect(0, 0, 1024, 1024);
        
        // Ajouter un d√©grad√© radial jaune-orang√©
        const gradient = ctx.createRadialGradient(512, 512, 0, 512, 512, 512);
        gradient.addColorStop(0, '#fff9c4');
        gradient.addColorStop(0.5, '#ffd54f');
        gradient.addColorStop(1, '#ff9800');
        ctx.globalAlpha = 0.7; // Plus transparent
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, 1024, 1024);
        ctx.globalAlpha = 1.0;
        
        // Ajouter des taches solaires al√©atoires plus subtiles
        ctx.fillStyle = 'rgba(255, 140, 0, 0.3)'; // Orange transparent
        for (let i = 0; i < 30; i++) {
          const x = Math.random() * 1024;
          const y = Math.random() * 1024;
          const size = 5 + Math.random() * 50;
          ctx.beginPath();
          ctx.arc(x, y, size, 0, Math.PI * 2);
          ctx.fill();
        }
        
        // Ajouter quelques taches sombres
        ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
        for (let i = 0; i < 15; i++) {
          const x = Math.random() * 1024;
          const y = Math.random() * 1024;
          const size = 3 + Math.random() * 20;
          ctx.beginPath();
          ctx.arc(x, y, size, 0, Math.PI * 2);
          ctx.fill();
        }
      } else if (url.includes('mercury')) {
        // Texture de Mercure - grise avec des crat√®res
        ctx.fillStyle = '#bbb'; // Gris plus clair
        ctx.fillRect(0, 0, 1024, 1024);
        
        // Ajouter des variations de terrain
        for (let i = 0; i < 15; i++) {
          ctx.fillStyle = `rgba(150, 150, 150, ${Math.random() * 0.4})`;
          ctx.beginPath();
          ctx.ellipse(
            Math.random() * 1024,
            Math.random() * 1024,
            Math.random() * 200 + 100,
            Math.random() * 200 + 50,
            Math.random() * Math.PI,
            0,
            Math.PI * 2
          );
          ctx.fill();
        }
        
        // Ajouter des crat√®res al√©atoires
        for (let i = 0; i < 200; i++) {
          const x = Math.random() * 1024;
          const y = Math.random() * 1024;
          const size = 3 + Math.random() * 15;
          
          // Ombre du crat√®re
          ctx.fillStyle = 'rgba(50, 50, 50, 0.2)';
          ctx.beginPath();
          ctx.arc(x, y, size, 0, Math.PI * 2);
          ctx.fill();
          
          // Centre du crat√®re plus clair
          ctx.fillStyle = 'rgba(200, 200, 200, 0.15)';
          ctx.beginPath();
          ctx.arc(x - size / 3, y - size / 3, size / 2, 0, Math.PI * 2);
          ctx.fill();
        }
      } else if (url.includes('venus')) {
        // Texture de V√©nus - orange p√¢le avec des motifs nuageux
        ctx.fillStyle = '#e8c07f'; // Base orange p√¢le
        ctx.fillRect(0, 0, 1024, 1024);
        
        // Ajouter des couches de nuages
        for (let i = 0; i < 8; i++) {
          ctx.fillStyle = `rgba(220, 200, 150, ${Math.random() * 0.15})`;
          
          for (let j = 0; j < 6; j++) {
            const x = Math.random() * 1024;
            const y = Math.random() * 1024;
            const radius = 100 + Math.random() * 300;
            
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, Math.PI * 2);
            ctx.fill();
          }
        }
        
        // Ajouter des stries subtiles
        ctx.strokeStyle = 'rgba(180, 160, 120, 0.2)';
        ctx.lineWidth = 2;
        for (let i = 0; i < 40; i++) {
          const y = Math.random() * 1024;
          ctx.beginPath();
          ctx.moveTo(0, y);
          
          // Ligne ondul√©e
          for (let x = 0; x < 1024; x += 20) {
            const deviation = Math.sin(x / 100) * 10;
            ctx.lineTo(x, y + deviation);
          }
          
          ctx.stroke();
        }
      } else if (url.includes('earth')) {
        if (url.includes('clouds')) {
          // Nuages de la Terre
          ctx.fillStyle = 'rgba(255, 255, 255, 0)';
          ctx.fillRect(0, 0, 1024, 1024);
          
          // G√©n√©rer des formations nuageuses al√©atoires
          ctx.fillStyle = 'rgba(255, 255, 255, 0.4)'; // Nuages moins denses
          for (let i = 0; i < 25; i++) {
            const x = Math.random() * 1024;
            const y = Math.random() * 1024;
            const radius = 30 + Math.random() * 150;
            
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, Math.PI * 2);
            ctx.fill();
          }
        } else {
          // Texture de la Terre - bleu avec du vert pour les continents
          ctx.fillStyle = '#1565c0'; // Bleu profond pour les oc√©ans
          ctx.fillRect(0, 0, 1024, 1024);
          
          // Ajouter des continents
          ctx.fillStyle = '#2e7d32'; // Vert plus fonc√© pour les terres
          
          // Formes de continents plus r√©alistes
          const continentShapes = [
            // Afrique stylis√©e
            [[400, 300], [500, 250], [550, 350], [500, 550], [400, 600], [350, 500]],
            // Am√©rique du Nord stylis√©e
            [[200, 200], [350, 150], [400, 300], [300, 350], [150, 300]],
            // Am√©rique du Sud stylis√©e
            [[300, 450], [350, 400], [400, 500], [350, 650], [300, 600]],
            // Eurasie stylis√©e
            [[500, 200], [750, 180], [800, 300], [700, 350], [550, 320]]
          ];
          
          continentShapes.forEach(points => {
            ctx.beginPath();
            ctx.moveTo(points[0][0], points[0][1]);
            
            for (let i = 1; i < points.length; i++) {
              ctx.lineTo(points[i][0], points[i][1]);
            }
            
            ctx.closePath();
            ctx.fill();
          });
          
          // Ajouter des calottes polaires
          ctx.fillStyle = '#e0e0e0'; // Blanc cass√©
          ctx.beginPath();
          ctx.arc(512, 100, 150, 0, Math.PI * 2);
          ctx.fill();
          
          ctx.beginPath();
          ctx.arc(512, 924, 150, 0, Math.PI * 2);
          ctx.fill();
        }
      } else if (url.includes('mars')) {
        // Texture de Mars - rouge orang√© avec des variations
        ctx.fillStyle = '#c14a09'; // Rouge-orang√© plus doux
        ctx.fillRect(0, 0, 1024, 1024);
        
        // Ajouter des variations de terrain
        for (let i = 0; i < 30; i++) {
          const x = Math.random() * 1024;
          const y = Math.random() * 1024;
          const radius = 30 + Math.random() * 100;
          
          // Varier entre des terrains plus clairs et plus fonc√©s
          const color = Math.random() > 0.5 ? 
            'rgba(150, 80, 30, 0.2)' : 
            'rgba(200, 120, 60, 0.2)';
          ctx.fillStyle = color;
          
          ctx.beginPath();
          ctx.arc(x, y, radius, 0, Math.PI * 2);
          ctx.fill();
        }
        
        // Ajouter des calottes polaires
        ctx.fillStyle = 'rgba(255, 255, 255, 0.6)';
        ctx.beginPath();
        ctx.arc(512, 80, 140, 0, Math.PI * 2);
        ctx.fill();
        
        ctx.beginPath();
        ctx.arc(512, 944, 140, 0, Math.PI * 2);
        ctx.fill();
      } else if (url.includes('jupiter')) {
        // Texture de Jupiter - bandes horizontales
        const gradient = ctx.createLinearGradient(0, 0, 0, 1024);
        gradient.addColorStop(0, '#dba56f');
        gradient.addColorStop(0.15, '#e8c596');
        gradient.addColorStop(0.25, '#c1895c');
        gradient.addColorStop(0.4, '#e0b880');
        gradient.addColorStop(0.5, '#ac7648');
        gradient.addColorStop(0.65, '#e0b880');
        gradient.addColorStop(0.75, '#bd8958');
        gradient.addColorStop(0.9, '#e8c596');
        gradient.addColorStop(1, '#dba56f');
        
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, 1024, 1024);
        
        // Ajouter des stries horizontales subtiles
        for (let y = 0; y < 1024; y += 40) {
          const thickness = 3 + Math.random() * 5;
          const transparency = 0.05 + Math.random() * 0.1;
          
          ctx.fillStyle = `rgba(150, 100, 70, ${transparency})`;
          ctx.fillRect(0, y, 1024, thickness);
          
          ctx.fillStyle = `rgba(230, 190, 150, ${transparency})`;
          ctx.fillRect(0, y + 15, 1024, thickness - 1);
        }
        
        // Ajouter la grande tache rouge
        const grs = {
          x: 300,
          y: 400,
          width: 200,
          height: 100
        };
        
        // Cr√©er un d√©grad√© pour la tache
        const grsGradient = ctx.createRadialGradient(
          grs.x, grs.y, 0,
          grs.x, grs.y, grs.width / 1.5
        );
        grsGradient.addColorStop(0, 'rgba(190, 70, 50, 0.7)');
        grsGradient.addColorStop(1, 'rgba(160, 60, 40, 0)');
        
        ctx.fillStyle = grsGradient;
        ctx.beginPath();
        ctx.ellipse(
          grs.x, grs.y,
          grs.width, grs.height,
          0, 0, Math.PI * 2
        );
        ctx.fill();
      } else if (url.includes('saturn')) {
        if (url.includes('ring')) {
          // Anneaux de Saturne - transparents au centre, blancs sur les bords
          ctx.fillStyle = 'rgba(0, 0, 0, 0)';
          ctx.fillRect(0, 0, 1024, 1024);
          
          const centerX = 512;
          const centerY = 512;
          
          // Cr√©er plusieurs bandes d'anneaux avec des opacit√©s et couleurs diverses
          const rings = [
            { inner: 260, outer: 290, color: 'rgba(255, 255, 255, 0.4)' },
            { inner: 300, outer: 340, color: 'rgba(240, 230, 200, 0.5)' },
            { inner: 350, outer: 400, color: 'rgba(250, 240, 210, 0.6)' },
            { inner: 410, outer: 430, color: 'rgba(210, 190, 160, 0.3)' }
          ];
          
          rings.forEach(ring => {
            ctx.beginPath();
            ctx.arc(centerX, centerY, ring.outer, 0, Math.PI * 2);
            ctx.arc(centerX, centerY, ring.inner, 0, Math.PI * 2, true);
            ctx.closePath();
            
            ctx.fillStyle = ring.color;
            ctx.fill();
          });
          
          // Cr√©er un trou pour la plan√®te
          ctx.globalCompositeOperation = 'destination-out';
          ctx.beginPath();
          ctx.arc(centerX, centerY, 250, 0, Math.PI * 2);
          ctx.fill();
          ctx.globalCompositeOperation = 'source-over';
          
          // Ajouter des d√©tails aux anneaux
          ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
          ctx.lineWidth = 1;
          
          for (let r = 260; r < 430; r += 5) {
            ctx.beginPath();
            ctx.arc(centerX, centerY, r, 0, Math.PI * 2);
            ctx.stroke();
          }
        } else {
          // Texture de Saturne - jaune p√¢le avec des bandes plus subtiles
          const gradient = ctx.createLinearGradient(0, 0, 0, 1024);
          gradient.addColorStop(0, '#e4d4a0');
          gradient.addColorStop(0.2, '#f0e6c8');
          gradient.addColorStop(0.3, '#d8c890');
          gradient.addColorStop(0.5, '#f5ebd0');
          gradient.addColorStop(0.6, '#d8c890');
          gradient.addColorStop(0.8, '#e8dca8');
          gradient.addColorStop(1, '#e4d4a0');
          
          ctx.fillStyle = gradient;
          ctx.fillRect(0, 0, 1024, 1024);
          
          // Bandes subtiles
          for (let y = 0; y < 1024; y += 60) {
            ctx.fillStyle = `rgba(200, 180, 140, 0.1)`;
            ctx.fillRect(0, y, 1024, 15);
          }
        }
      } else if (url.includes('uranus')) {
        if (url.includes('ring')) {
          // Anneaux d'Uranus - tr√®s fins et p√¢les
          ctx.fillStyle = 'rgba(0, 0, 0, 0)';
          ctx.fillRect(0, 0, 1024, 1024);
          
          const centerX = 512;
          const centerY = 512;
          
          // Anneaux fins
          const rings = [
            { inner: 280, outer: 295, color: 'rgba(255, 255, 255, 0.15)' },
            { inner: 300, outer: 310, color: 'rgba(255, 255, 255, 0.20)' },
            { inner: 320, outer: 330, color: 'rgba(255, 255, 255, 0.15)' }
          ];
          
          rings.forEach(ring => {
            ctx.beginPath();
            ctx.arc(centerX, centerY, ring.outer, 0, Math.PI * 2);
            ctx.arc(centerX, centerY, ring.inner, 0, Math.PI * 2, true);
            ctx.closePath();
            
            ctx.fillStyle = ring.color;
            ctx.fill();
          });
          
          // Cr√©er un trou pour la plan√®te
          ctx.globalCompositeOperation = 'destination-out';
          ctx.beginPath();
          ctx.arc(centerX, centerY, 270, 0, Math.PI * 2);
          ctx.fill();
          ctx.globalCompositeOperation = 'source-over';
        } else {
          // Texture d'Uranus - bleu-vert p√¢le uni
          ctx.fillStyle = '#97d8eb'; // Bleu-vert plus doux
          ctx.fillRect(0, 0, 1024, 1024);
          
          // Cr√©er un d√©grad√© subtil
          const gradient = ctx.createLinearGradient(0, 0, 1024, 1024);
          gradient.addColorStop(0, 'rgba(120, 220, 230, 0.4)');
          gradient.addColorStop(0.5, 'rgba(150, 230, 240, 0.1)');
          gradient.addColorStop(1, 'rgba(120, 220, 230, 0.4)');
          
          ctx.fillStyle = gradient;
          ctx.fillRect(0, 0, 1024, 1024);
          
          // Ajouter quelques l√©g√®res variations
          for (let i = 0; i < 10; i++) {
            const x = Math.random() * 1024;
            const y = Math.random() * 1024;
            const radius = 150 + Math.random() * 250;
            
            ctx.fillStyle = 'rgba(130, 200, 210, 0.15)';
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, Math.PI * 2);
            ctx.fill();
          }
        }
      } else if (url.includes('neptune')) {
        // Texture de Neptune - bleu profond
        ctx.fillStyle = '#1e40af'; // Bleu plus profond
        ctx.fillRect(0, 0, 1024, 1024);
        
        // Cr√©er un d√©grad√© subtil pour plus de dimension
        const gradient = ctx.createRadialGradient(
          512, 512, 200,
          512, 512, 600
        );
        gradient.addColorStop(0, 'rgba(40, 80, 170, 0.5)');
        gradient.addColorStop(1, 'rgba(20, 50, 120, 0)');
        
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, 1024, 1024);
        
        // Ajouter des nuages et des temp√™tes
        for (let i = 0; i < 15; i++) {
          const x = Math.random() * 1024;
          const y = Math.random() * 1024;
          const radius = 30 + Math.random() * 70;
          
          ctx.fillStyle = 'rgba(60, 100, 180, 0.2)';
          ctx.beginPath();
          ctx.arc(x, y, radius, 0, Math.PI * 2);
          ctx.fill();
        }
        
        // Ajouter la Grande Tache Sombre
        ctx.fillStyle = 'rgba(10, 30, 80, 0.5)';
        ctx.beginPath();
        ctx.ellipse(400, 600, 80, 50, 0, 0, Math.PI * 2);
        ctx.fill();
      } else {
        // Texture par d√©faut
        ctx.fillStyle = '#eeeeee'; // Gris tr√®s p√¢le
        ctx.fillRect(0, 0, 1024, 1024);
        
        // Ajouter un peu de texture
        for (let i = 0; i < 100; i++) {
          ctx.fillStyle = `rgba(200, 200, 200, ${Math.random() * 0.1})`;
          ctx.beginPath();
          ctx.arc(
            Math.random() * 1024,
            Math.random() * 1024,
            Math.random() * 50,
            0,
            Math.PI * 2
          );
          ctx.fill();
        }
      }
      
      const texture = new THREE.CanvasTexture(canvas);
      return texture;
    }
    
    /**
     * Cr√©ation de g√©om√©trie mise en cache
     * Cr√©e ou r√©cup√®re des g√©om√©tries mises en cache
     */
    function getCachedGeometry(key, createFunc) {
      if (!geometryCache[key]) {
        geometryCache[key] = createFunc();
      }
      return geometryCache[key];
    }
    
    /**
     * Cr√©ation de mat√©riau mis en cache
     * Cr√©e ou r√©cup√®re des mat√©riaux mis en cache
     */
    function getCachedMaterial(key, createFunc) {
      if (!materialCache[key]) {
        materialCache[key] = createFunc();
      }
      return materialCache[key];
    }

    /**
     * Fonction d'initialisation principale
     * Configure la sc√®ne, la cam√©ra, le renderer et tous les objets
     */
    function init() {
      console.log('Initialisation...');
      
      // D√©tecter les capacit√©s de performance
      detectPerformance();
      
      // Cr√©er la sc√®ne
      scene = new THREE.Scene();
      scene.fog = new THREE.FogExp2(0x000011, 0.00002);
      
      // Cr√©er la cam√©ra
      camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 10000);
      camera.position.copy(initialCameraPosition);
      
      // Cr√©er le renderer avec des param√®tres optimis√©s
      renderer = new THREE.WebGLRenderer({ 
        canvas: document.getElementById('canvas'),
        antialias: !isLowPerformance,
        alpha: true,
        powerPreference: "high-performance",
        precision: isLowPerformance ? "mediump" : "highp"
      });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, isLowPerformance ? 1 : 2));
      renderer.setClearColor(0x000011);
      renderer.shadowMap.enabled = !isLowPerformance;
      renderer.shadowMap.type = THREE.PCFSoftShadowMap;
      
      // Configurer le post-processing
      setupPostProcessing();
      
      // Cr√©er les contr√¥les d'orbite
      controls = new THREE.OrbitControls(camera, renderer.domElement);
      controls.enableDamping = true;
      controls.dampingFactor = 0.05;
      controls.autoRotate = autoRotate;
      controls.autoRotateSpeed = 0.2;
      controls.maxDistance = 1000;
      controls.minDistance = 5;
      controls.target.copy(initialControlsTarget);
      
      // Configurer les √©couteurs d'√©v√©nements
      setupEventListeners();
      
      // Cr√©er le syst√®me solaire
      createSolarSystem();
      
      // Cr√©er la vue de comparaison des plan√®tes
      createPlanetComparison();
      
      // Configurer les onglets d'information des plan√®tes
      setupPlanetInfoTabs();
      
      // Configurer la galerie d'images
      setupGallery();
      
      // Cr√©er des effets de particules
      createParticleEffects();
      
      // D√©marrer la boucle d'animation
      lastTime = performance.now();
      animate();
      
      console.log('Initialisation termin√©e');
    }
    
    /**
     * Configuration du post-processing
     * Configure des effets visuels comme le bloom
     */
    function setupPostProcessing() {
      const renderScene = new THREE.RenderPass(scene, camera);
      
      // Param√®tres bloom plus subtils avec moins d'intensit√©
      const bloomPass = new THREE.UnrealBloomPass(
        new THREE.Vector2(window.innerWidth, window.innerHeight),
        isLowPerformance ? 0.3 : 0.4,  // intensit√© r√©duite
        isLowPerformance ? 0.4 : 0.3,  // rayon mod√©r√©
        isLowPerformance ? 0.9 : 0.85  // seuil augment√© pour r√©duire l'effet
      );
      
      composer = new THREE.EffectComposer(renderer);
      composer.addPass(renderScene);
      composer.addPass(bloomPass);
    }
    
    /**
     * Configuration des onglets d'information des plan√®tes
     * Configure les onglets interactifs dans le panneau d'information
     */
    function setupPlanetInfoTabs() {
      const tabs = document.querySelectorAll('.planet-info-tab');
      
      tabs.forEach(tab => {
        tab.addEventListener('click', (e) => {
          e.stopPropagation(); // Emp√™cher la propagation pour √©viter de fermer le panneau
          
          // D√©sactiver tous les onglets et contenus
          document.querySelectorAll('.planet-info-tab').forEach(t => t.classList.remove('active'));
          document.querySelectorAll('.planet-info-tab-content').forEach(c => c.classList.remove('active'));
          
          // Activer l'onglet cliqu√© et son contenu
          tab.classList.add('active');
          const tabId = tab.getAttribute('data-tab');
          document.getElementById(`tab-${tabId}`).classList.add('active');
        });
      });
      
      // Configurer le bouton d'exploration
      document.getElementById('planet-explore-button').addEventListener('click', (e) => {
        e.stopPropagation(); // Emp√™cher la propagation pour √©viter de fermer le panneau
        showNotification("Fonctionnalit√© d'exploration d√©taill√©e en d√©veloppement");
      });
    }
    
    /**
     * Configuration de la galerie d'images
     * Configure la galerie d'images en plein √©cran
     */
    function setupGallery() {
      // Fermer la galerie
      document.getElementById('gallery-close').addEventListener('click', () => {
        fullscreenGallery.classList.remove('visible');
      });
      
      // Navigation dans la galerie
      document.getElementById('gallery-prev').addEventListener('click', () => {
        if (currentGalleryImages.length > 0) {
          currentGalleryIndex = (currentGalleryIndex - 1 + currentGalleryImages.length) % currentGalleryImages.length;
          updateGalleryImage();
        }
      });
      
      document.getElementById('gallery-next').addEventListener('click', () => {
        if (currentGalleryImages.length > 0) {
          currentGalleryIndex = (currentGalleryIndex + 1) % currentGalleryImages.length;
          updateGalleryImage();
        }
      });
      
      // Fermer la galerie en cliquant en dehors de l'image
      fullscreenGallery.addEventListener('click', (e) => {
        if (e.target === fullscreenGallery) {
          fullscreenGallery.classList.remove('visible');
        }
      });
      
      // Fermer la galerie avec la touche √âchap
      window.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && fullscreenGallery.classList.contains('visible')) {
          fullscreenGallery.classList.remove('visible');
        }
      });
    }
    
    /**
     * Mettre √† jour l'image de la galerie
     * Met √† jour l'image affich√©e dans la galerie en plein √©cran
     */
    function updateGalleryImage() {
      if (currentGalleryImages.length > 0) {
        const image = currentGalleryImages[currentGalleryIndex];
        galleryImage.src = image.url;
        galleryCaption.textContent = image.caption;
      }
    }
    
    /**
     * Ouvrir la galerie
     * Ouvre la galerie en plein √©cran avec les images d'une plan√®te
     */
    function openGallery(planetId, imageIndex = 0) {
      const data = planetData[planetId];
      
      if (data && data.gallery && data.gallery.length > 0) {
        currentGalleryImages = data.gallery;
        currentGalleryIndex = imageIndex;
        
        updateGalleryImage();
        fullscreenGallery.classList.add('visible');
      }
    }
    
    /**
     * Cr√©er des effets de particules
     * Ajoute des effets de particules pour am√©liorer l'ambiance visuelle
     */
    function createParticleEffects() {
      const container = document.getElementById('particle-container');
      
      // Cr√©er des particules qui flottent lentement
      for (let i = 0; i < 50; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        
        // Taille al√©atoire
        const size = Math.random() * 2 + 1;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        
        // Position al√©atoire
        const x = Math.random() * window.innerWidth;
        const y = Math.random() * window.innerHeight;
        particle.style.left = `${x}px`;
        particle.style.top = `${y}px`;
        
        // D√©lai d'animation al√©atoire
        particle.style.animationDelay = `${Math.random() * 5}s`;
        
        container.appendChild(particle);
      }
    }
    
    /**
     * Configuration des √©couteurs d'√©v√©nements
     * Configure tous les gestionnaires d'interaction utilisateur
     */
    function setupEventListeners() {
      // Redimensionnement de la fen√™tre
      window.addEventListener('resize', onWindowResize);
      
      // Mouvement de la souris
      window.addEventListener('mousemove', onMouseMove);
      
      // Clic de la souris
      window.addEventListener('click', onMouseClick);
      
      // Touche √âchap pour quitter le mode zoom
      window.addEventListener('keydown', function(event) {
        if (event.key === 'Escape' && isZooming) {
          exitZoomMode();
        }
        
        // Afficher/masquer le compteur FPS avec la touche F
        if (event.key === 'f' || event.key === 'F') {
          fpsCounter.style.display = fpsCounter.style.display === 'none' ? 'block' : 'none';
        }
      });
      
      // Activer/d√©sactiver la rotation automatique
      document.getElementById('rotate-toggle').addEventListener('click', function() {
        autoRotate = !autoRotate;
        controls.autoRotate = autoRotate;
        showNotification(autoRotate ? "Rotation automatique activ√©e" : "Rotation automatique d√©sactiv√©e");
      });
      
      // Bouton de r√©initialisation de la cam√©ra
      document.getElementById('reset-camera').addEventListener('click', resetCamera);
      
      // Activer/d√©sactiver la comparaison des plan√®tes
      document.getElementById('compare-toggle').addEventListener('click', togglePlanetComparison);
      
      // Activer/d√©sactiver le plein √©cran
      document.getElementById('fullscreen-toggle').addEventListener('click', toggleFullscreen);
      
      // Fermer le panneau d'information des plan√®tes
      document.getElementById('planet-info-close').addEventListener('click', function(e) {
        e.stopPropagation(); // Emp√™cher la propagation pour √©viter des conflits
        exitZoomMode();
      });
      
      // Fermer la comparaison des plan√®tes
      document.getElementById('planet-comparison-close').addEventListener('click', function() {
        planetComparison.classList.remove('visible');
      });
      
      // Activer/d√©sactiver l'√©chelle r√©aliste
      document.getElementById('realistic-toggle').addEventListener('click', toggleRealisticScale);
      
      // Activer/d√©sactiver les lignes d'orbite
      document.getElementById('orbit-lines-toggle').addEventListener('click', toggleOrbitLines);
      
      // Activer/d√©sactiver les atmosph√®res
      document.getElementById('atmosphere-toggle').addEventListener('click', toggleAtmospheres);
      
      // Bouton de r√©initialisation compl√®te
      document.getElementById('reset-all').addEventListener('click', resetAll);
      
      // Boutons de contr√¥le du temps
      document.getElementById('time-slider').addEventListener('input', function(e) {
        updateTimeScale(parseFloat(e.target.value));
      });
      
      document.getElementById('time-slower').addEventListener('click', function() {
        const slider = document.getElementById('time-slider');
        slider.value = Math.max(0, parseInt(slider.value) - 10);
        updateTimeScale(parseFloat(slider.value));
      });
      
      document.getElementById('time-faster').addEventListener('click', function() {
        const slider = document.getElementById('time-slider');
        slider.value = Math.min(100, parseInt(slider.value) + 10);
        updateTimeScale(parseFloat(slider.value));
      });
      
      document.getElementById('time-reset').addEventListener('click', function() {
        const slider = document.getElementById('time-slider');
        slider.value = 50;
        updateTimeScale(50);
      });
    }
    
    /**
     * Afficher une notification
     * Affiche un message temporaire √† l'utilisateur
     */
    function showNotification(message) {
      const notif = document.getElementById('notification');
      notif.textContent = message;
      notif.classList.add('visible');
      
      setTimeout(() => {
        notif.classList.remove('visible');
      }, 3000);
    }
    
    /**
     * Mettre √† jour l'√©chelle de temps
     * Change la vitesse de simulation en fonction de la valeur du curseur
     */
    function updateTimeScale(value) {
      // Convertir la plage 0-100 en √©chelle de temps significative (0.1 √† 5)
      timeScale = 0.1 + (value / 100) * 4.9;
      console.log(`√âchelle de temps d√©finie √†: ${timeScale.toFixed(2)}x`);
    }
    
    /**
     * R√©initialiser tout
     * R√©initialise tous les param√®tres et la vue √† leurs valeurs par d√©faut
     */
    function resetAll() {
      // R√©initialiser la cam√©ra
      resetCamera();
      
      // R√©initialiser les param√®tres
      if (isRealisticScale) {
        toggleRealisticScale();
      }
      
      if (!showOrbitLines) {
        toggleOrbitLines();
      }
      
      if (!showAtmospheres) {
        toggleAtmospheres();
      }
      
      // R√©initialiser l'√©chelle de temps
      const slider = document.getElementById('time-slider');
      slider.value = 50;
      updateTimeScale(50);
      
      // Activer la rotation automatique
      autoRotate = true;
      controls.autoRotate = true;
      
      // Fermer les panneaux ouverts
      planetInfoPanel.classList.remove('visible');
      planetComparison.classList.remove('visible');
      fullscreenGallery.classList.remove('visible');
      
      showNotification("Syst√®me r√©initialis√©");
    }
    
    /**
     * Activer/d√©sactiver l'√©chelle r√©aliste
     * Bascule entre des √©chelles r√©alistes et exag√©r√©es pour les plan√®tes
     */
    function toggleRealisticScale() {
      isRealisticScale = !isRealisticScale;
      
      // Mettre √† jour les facteurs d'√©chelle
      const distanceScale = isRealisticScale ? REALISTIC_DISTANCE_SCALE : DISTANCE_SCALE;
      const sizeExaggeration = isRealisticScale ? REALISTIC_SIZE_EXAGGERATION : SIZE_EXAGGERATION;
      
      // Mettre √† jour l'affichage
      document.getElementById('distance-scale').textContent = distanceScale;
      document.getElementById('size-scale').textContent = (SIZE_SCALE_BASE * sizeExaggeration).toFixed(3);
      
      // Recr√©er le syst√®me solaire avec la nouvelle √©chelle
      clearSolarSystem();
      createSolarSystem();
      
      showNotification(`√âchelle ${isRealisticScale ? 'r√©aliste' : 'exag√©r√©e'} activ√©e`);
    }
    
    /**
     * Activer/d√©sactiver les lignes d'orbite
     * Affiche ou masque les lignes d'orbite des plan√®tes
     */
    function toggleOrbitLines() {
      showOrbitLines = !showOrbitLines;
      
      // Mettre √† jour la visibilit√© de toutes les lignes d'orbite
      for (const planetId in orbitLines) {
        if (orbitLines[planetId]) {
          orbitLines[planetId].visible = showOrbitLines;
        }
      }
      
      showNotification(showOrbitLines ? "Orbites affich√©es" : "Orbites masqu√©es");
    }
    
    /**
     * Activer/d√©sactiver les atmosph√®res
     * Affiche ou masque les atmosph√®res plan√©taires
     */
    function toggleAtmospheres() {
      showAtmospheres = !showAtmospheres;
      
      // Mettre √† jour la visibilit√© de toutes les atmosph√®res
      for (const planetId in atmospheres) {
        if (atmospheres[planetId]) {
          atmospheres[planetId].visible = showAtmospheres;
        }
      }
      
      showNotification(showAtmospheres ? "Atmosph√®res affich√©es" : "Atmosph√®res masqu√©es");
    }
    
    /**
     * R√©initialiser la cam√©ra
     * Ram√®ne la cam√©ra √† sa position par d√©faut
     */
    function resetCamera() {
      // Quitter le mode zoom si actif
      if (isZooming) {
        exitZoomMode();
        return; // exitZoomMode() s'occupe d√©j√† de r√©initialiser la cam√©ra
      }
      
      // Animer le retour de la cam√©ra √† sa position initiale
      gsap.to(camera.position, {
        x: initialCameraPosition.x,
        y: initialCameraPosition.y,
        z: initialCameraPosition.z,
        duration: 2,
        ease: "power2.inOut"
      });
      
      // R√©initialiser la cible des contr√¥les
      gsap.to(controls.target, {
        x: initialControlsTarget.x,
        y: initialControlsTarget.y,
        z: initialControlsTarget.z,
        duration: 2,
        ease: "power2.inOut"
      });
      
      showNotification("Cam√©ra r√©initialis√©e");
    }
    
    /**
     * Activer/d√©sactiver le plein √©cran
     * Entre ou sort du mode plein √©cran
     */
    function toggleFullscreen() {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen().catch(err => {
          console.error(`Erreur lors de la tentative d'activation du plein √©cran: ${err.message}`);
        });
      } else {
        if (document.exitFullscreen) {
          document.exitFullscreen();
        }
      }
    }
    
    /**
     * Gestionnaire de mouvement de la souris
     * Suit la position de la souris et met √† jour les effets de survol
     */
    function onMouseMove(event) {
      // Calculer les coordonn√©es normalis√©es de la souris (-1 √† 1)
      mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
      mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
      
      // V√©rifier si la souris survole une plan√®te
      if (!isZooming) {
        checkPlanetHover();
      }
    }
    
    /**
     * V√©rification du survol de plan√®te
     * D√©tecte quand la souris est sur une plan√®te et affiche une infobulle
     */
    function checkPlanetHover() {
      raycaster.setFromCamera(mouse, camera);
      
      // Obtenir tous les objets plan√®tes √† tester
      const planetObjects = Object.values(planets);
      
      // Calculer les intersections
      const intersects = raycaster.intersectObjects(planetObjects);
      
      if (intersects.length > 0) {
        const intersectedPlanet = intersects[0].object;
        
        // Si c'est une nouvelle plan√®te survol√©e
        if (hoveredPlanet !== intersectedPlanet) {
          hoveredPlanet = intersectedPlanet;
          
          // Afficher l'√©tiquette de la plan√®te si les √©tiquettes sont activ√©es
          if (showLabels) {
            const planetScreenPosition = getScreenPosition(intersectedPlanet);
            planetLabel.textContent = intersectedPlanet.userData.name;
            planetLabel.style.left = `${planetScreenPosition.x}px`;
            planetLabel.style.top = `${planetScreenPosition.y - 30}px`;
            planetLabel.style.opacity = '1';
          }
          
          // Changer le curseur pour indiquer que c'est cliquable
          document.body.style.cursor = 'pointer';
        }
      } else {
        // Si aucune plan√®te n'est survol√©e
        if (hoveredPlanet) {
          hoveredPlanet = null;
          planetLabel.style.opacity = '0';
          document.body.style.cursor = 'default';
        }
      }
    }
    
    /**
     * Obtenir la position √† l'√©cran
     * Convertit la position d'un objet 3D en coordonn√©es d'√©cran 2D
     */
    function getScreenPosition(object) {
      const vector = new THREE.Vector3();
      
      // Obtenir la position mondiale de l'objet
      object.getWorldPosition(vector);
      
      // Projeter la position 3D sur l'√©cran 2D
      vector.project(camera);
      
      // Convertir en coordonn√©es d'√©cran
      const x = (vector.x * 0.5 + 0.5) * window.innerWidth;
      const y = (vector.y * -0.5 + 0.5) * window.innerHeight;
      
      return { x, y };
    }
    
    /**
     * Gestionnaire de clic de souris
     * G√®re la s√©lection de plan√®te et le zoom
     */
    function onMouseClick(event) {
      // Ignorer si d√©j√† en train de zoomer ou de d√©zoomer
      if (isZooming && dezoomInProgress) return;
      
      // V√©rifier si une plan√®te est cliqu√©e
      raycaster.setFromCamera(mouse, camera);
      
      // Obtenir tous les objets plan√®tes √† tester
      const planetObjects = Object.values(planets);
      
      // Calculer les intersections
      const intersects = raycaster.intersectObjects(planetObjects);
      
      if (intersects.length > 0) {
        const clickedPlanet = intersects[0].object;
        
        // Si d√©j√† en mode zoom et qu'on clique sur une autre plan√®te
        if (isZooming && zoomTarget !== clickedPlanet) {
          // D√©zoomer d'abord, puis zoomer sur la nouvelle plan√®te
          exitZoomMode(() => {
            zoomToPlanet(clickedPlanet);
          });
        } 
        // Si pas en mode zoom, zoomer sur la plan√®te cliqu√©e
        else if (!isZooming) {
          zoomToPlanet(clickedPlanet);
        }
      } else {
        // Masquer le panneau d'information si on clique ailleurs
        if (isZooming) {
          exitZoomMode();
        }
      }
    }
    
    /**
     * Zoom sur une plan√®te
     * Transition fluide de la cam√©ra pour se concentrer sur la plan√®te s√©lectionn√©e
     */
    function zoomToPlanet(planet) {
      // Obtenir les donn√©es de la plan√®te
      const planetId = planet.userData.id;
      
      // Entrer en mode zoom
      isZooming = true;
      zoomTarget = planet;
      
      // Masquer les √©l√©ments UI pendant le zoom
      titleContainer.style.opacity = '0';
      scaleInfo.style.opacity = '0';
      
      // Obtenir la position mondiale de la plan√®te
      const planetPosition = new THREE.Vector3();
      planet.getWorldPosition(planetPosition);
      
      // Calculer la distance de zoom en fonction de la taille de la plan√®te
      const planetSize = planet.scale.x;
      const zoomDistance = planetSize * 5;
      
      // Calculer la position de la cam√©ra l√©g√®rement d√©cal√©e de la vue directe
      const cameraTargetPosition = new THREE.Vector3(
        planetPosition.x + zoomDistance * 1.5,
        planetPosition.y + zoomDistance * 0.5,
        planetPosition.z + zoomDistance * 1.5
      );
      
      // Animer le mouvement de la cam√©ra
      gsap.to(camera.position, {
        x: cameraTargetPosition.x,
        y: cameraTargetPosition.y,
        z: cameraTargetPosition.z,
        duration: 2,
        ease: "power2.inOut",
        onComplete: function() {
          // Afficher les informations de la plan√®te apr√®s que la cam√©ra atteigne sa destination
          showPlanetInfo(planetId);
        }
      });
      
      // Animer la cible des contr√¥les vers la position de la plan√®te
      gsap.to(controls.target, {
        x: planetPosition.x,
        y: planetPosition.y,
        z: planetPosition.z,
        duration: 2,
        ease: "power2.inOut"
      });
      
      console.log(`Zoom sur ${planet.userData.name}`);
    }
    
    /**
     * Quitter le mode zoom
     * Retourne de la vue rapproch√©e de la plan√®te √† la vue normale
     * @param {Function} callback - Fonction √† ex√©cuter apr√®s la fin du d√©zoom
     */
    function exitZoomMode(callback) {
      if (!isZooming) return;
      
      dezoomInProgress = true;
      
      // Masquer les informations de la plan√®te
      planetInfoPanel.classList.remove('visible');
      
      // Afficher √† nouveau les √©l√©ments UI
      titleContainer.style.opacity = '1';
      scaleInfo.style.opacity = '1';
      
      // R√©initialiser la position de la cam√©ra
      gsap.to(camera.position, {
        x: initialCameraPosition.x,
        y: initialCameraPosition.y,
        z: initialCameraPosition.z,
        duration: 2,
        ease: "power2.inOut",
        onComplete: function() {
          isZooming = false;
          zoomTarget = null;
          dezoomInProgress = false;
          
          // Ex√©cuter le callback si fourni
          if (typeof callback === 'function') {
            callback();
          }
        }
      });
      
      // R√©initialiser la cible des contr√¥les
      gsap.to(controls.target, {
        x: initialControlsTarget.x,
        y: initialControlsTarget.y,
        z: initialControlsTarget.z,
        duration: 2,
        ease: "power2.inOut"
      });
      
      console.log("Sortie du mode zoom");
    }
    
    /**
     * Afficher les informations d'une plan√®te
     * Affiche des informations d√©taill√©es sur la plan√®te s√©lectionn√©e
     */
    function showPlanetInfo(planetId) {
      const data = planetData[planetId];
      
      // Mettre √† jour le contenu du panneau d'information
      document.getElementById('planet-info-title').textContent = data.name;
      
      // Utiliser la texture pour l'ic√¥ne (url de la texture pour garantir qu'une image est affich√©e)
      document.getElementById('planet-info-icon').style.backgroundImage = `url(${data.textureUrl})`;
      
      document.getElementById('planet-info-distance').textContent = `${data.distance} UA (${(data.distance * 149.6).toFixed(0)} millions km)`;
      document.getElementById('planet-info-diameter').textContent = `${data.diameter.toLocaleString()} km`;
      document.getElementById('planet-info-revolution').textContent = `${data.revolutionPeriod.toLocaleString()} jours`;
      document.getElementById('planet-info-rotation').textContent = `${data.rotationPeriod.toLocaleString()} heures`;
      document.getElementById('planet-info-temperature').textContent = `${data.temperature}¬∞C`;
      document.getElementById('planet-info-moons').textContent = data.moons;
      document.getElementById('planet-info-mass').textContent = data.mass;
      document.getElementById('planet-info-gravity').textContent = data.gravity;
      document.getElementById('planet-info-escape').textContent = `${data.escapeVelocity} km/s`;
      document.getElementById('planet-info-description').textContent = data.description;
      document.getElementById('planet-info-fact').textContent = data.fact;
      document.getElementById('planet-info-atmosphere').textContent = data.atmosphere || "N/A";
      document.getElementById('planet-info-axial-tilt').textContent = `${data.axialTilt}¬∞`;
      document.getElementById('planet-info-eccentricity').textContent = data.eccentricity;
      document.getElementById('planet-info-earth-distance').textContent = 
        planetId === 'earth' ? "0 km" : `${Math.abs((data.distance - 1) * 149.6).toFixed(1)} millions km`;
      
      // Ajouter les caract√©ristiques de la plan√®te si disponibles
      const featuresContainer = document.getElementById('planet-info-features');
      featuresContainer.innerHTML = '';
      
      if (data.features && data.features.length > 0) {
        const featuresList = document.createElement('ul');
        featuresList.style.listStyleType = 'none';
        featuresList.style.padding = '0';
        featuresList.style.marginTop = '10px';
        
        data.features.forEach(feature => {
          const featureItem = document.createElement('li');
          featureItem.style.padding = '8px 0';
          featureItem.style.borderBottom = '1px solid rgba(255, 255, 255, 0.1)';
          featureItem.innerHTML = `<span style="color: rgba(0, 204, 255, 0.8);">‚Ä¢</span> ${feature}`;
          featuresList.appendChild(featureItem);
        });
        
        const featuresTitle = document.createElement('h3');
        featuresTitle.textContent = 'Caract√©ristiques cl√©s';
        featuresTitle.style.color = '#00ccff';
        featuresTitle.style.marginTop = '20px';
        featuresTitle.style.marginBottom = '10px';
        
        featuresContainer.appendChild(featuresTitle);
        featuresContainer.appendChild(featuresList);
      }
      
      // Ajouter les images √† la galerie
      const galleryContainer = document.getElementById('planet-info-gallery');
      galleryContainer.innerHTML = '';
      
      if (data.gallery && data.gallery.length > 0) {
        data.gallery.forEach((image, index) => {
          const imageDiv = document.createElement('div');
          imageDiv.className = 'planet-info-image';
          imageDiv.style.backgroundImage = `url(${image.url})`;
          imageDiv.addEventListener('click', () => {
            openGallery(planetId, index);
          });
          galleryContainer.appendChild(imageDiv);
        });
      }
      
      // Afficher le panneau d'information
      planetInfoPanel.classList.add('visible');
    }
    
    /**
     * Gestionnaire de redimensionnement de fen√™tre
     * Met √† jour le rendu lorsque la taille de la fen√™tre change
     */
    function onWindowResize() {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
      composer.setSize(window.innerWidth, window.innerHeight);
    }
    
    /**
     * Effacer le syst√®me solaire
     * Supprime tous les objets c√©lestes pour reconstruire avec de nouveaux param√®tres
     */
    function clearSolarSystem() {
      // Supprimer toutes les plan√®tes et objets associ√©s
      for (const planetId in planets) {
        if (planets[planetId].parent) {
          scene.remove(planets[planetId].parent);
        }
      }
      
      for (const orbitId in orbitLines) {
        scene.remove(orbitLines[orbitId]);
      }
      
      // Effacer les r√©f√©rences d'objets
      planets = {};
      orbitLines = {};
      atmospheres = {};
    }
    
    /**
     * Cr√©er le syst√®me solaire
     * Construit le syst√®me solaire complet avec tous les corps c√©lestes
     */
    function createSolarSystem() {
      // Fond √©toil√©
      createStarBackground();
      
      // Soleil
      createSun();
      
      // Plan√®tes
      for (const planetId in planetData) {
        if (planetId !== 'sun') {
          createPlanet(planetId);
        }
      }
    }
    
    /**
     * Cr√©er un fond √©toil√©
     * G√©n√®re un fond √©toil√© r√©aliste
     */
    function createStarBackground() {
      // √âtoiles (particules) avec instanciation pour optimisation
      const starsCount = isLowPerformance ? 5000 : 20000;
      const starsGeometry = new THREE.BufferGeometry();
      const starsMaterial = new THREE.PointsMaterial({
        color: 0xffffff,
        size: 0.5,
        transparent: true,
        opacity: 1.0,
        sizeAttenuation: true
      });
      
      const starsVertices = [];
      const starsColors = [];
      
      for (let i = 0; i < starsCount; i++) {
        const x = (Math.random() - 0.5) * 2000;
        const y = (Math.random() - 0.5) * 2000;
        const z = (Math.random() - 0.5) * 2000;
        starsVertices.push(x, y, z);
        
        // Couleurs al√©atoires pour les √©toiles - plus lumineuses
        const r = Math.random() * 0.2 + 0.8;
        const g = Math.random() * 0.2 + 0.8;
        const b = Math.random() * 0.2 + 0.8;
        starsColors.push(r, g, b);
      }
      
      starsGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starsVertices, 3));
      starsGeometry.setAttribute('color', new THREE.Float32BufferAttribute(starsColors, 3));
      starsMaterial.vertexColors = true;
      
      const stars = new THREE.Points(starsGeometry, starsMaterial);
      scene.add(stars);
      objects.stars = stars;
    }
    
    /**
     * Cr√©er le soleil
     * G√©n√®re le soleil avec des effets de lueur r√©alistes
     */
    function createSun() {
      const data = planetData.sun;
      
      // Taille du soleil bas√©e sur le diam√®tre r√©el par rapport √† la Terre
      const sunRealSize = data.size * SIZE_SCALE_BASE;
      // R√©duire l√©g√®rement la taille pour une meilleure visualisation
      const sunSize = sunRealSize * (isRealisticScale ? 0.3 : 0.5);
      
      // Cr√©er un groupe pour le soleil et ses effets
      const sunGroup = new THREE.Group();
      scene.add(sunGroup);
      
      // Texture du soleil (g√©n√©r√©e localement pour garantir sa qualit√©)
      const sunTexture = generateTexture(data.textureUrl);
      
      // Cr√©er un mat√©riau lumineux pour le soleil avec moins d'intensit√©
      const sunMaterial = new THREE.MeshBasicMaterial({
        map: sunTexture,
        color: 0xf5a742, // Orange doux
        emissive: 0xf08000,
        emissiveIntensity: 0.3
      });
      
      // Cr√©er la sph√®re du soleil
      const sunGeometry = new THREE.SphereGeometry(sunSize, isLowPerformance ? 32 : 64, isLowPerformance ? 32 : 64);
      const sun = new THREE.Mesh(sunGeometry, sunMaterial);
      sunGroup.add(sun);
      objects.sun = sun;
      planets.sun = sun;
      
      // Ajouter des donn√©es au maillage pour l'interaction
      sun.userData = {
        id: 'sun',
        name: data.name
      };
      
      // Ajouter des couches de lueur avec opacit√© r√©duite
      const sunGlow1 = createSunGlowLayer(sunSize * 1.2, 0xffdd44, 0.2);
      sunGroup.add(sunGlow1);
      
      const sunGlow2 = createSunGlowLayer(sunSize * 1.5, 0xffcc00, 0.15);
      sunGroup.add(sunGlow2);
      
      const sunGlow3 = createSunGlowLayer(sunSize * 2.0, 0xff9900, 0.08);
      sunGroup.add(sunGlow3);
      
      const sunGlow4 = createSunGlowLayer(sunSize * 2.5, 0xff6600, 0.04);
      sunGroup.add(sunGlow4);
      
      // Ajouter un effet d'√©clat
      const flareTexture = createFlareTexture();
      const flareMaterial = new THREE.SpriteMaterial({
        map: flareTexture,
        color: 0xffffcc,
        transparent: true,
        opacity: 0.35,
        blending: THREE.AdditiveBlending
      });
      
      const flare = new THREE.Sprite(flareMaterial);
      flare.scale.set(sunSize * 4, sunSize * 4, 1);
      sunGroup.add(flare);
      
      // √âclairage global
      // Lumi√®re principale du soleil
      const sunLight = new THREE.PointLight(0xffffcc, 1.5, 1000);
      sunGroup.add(sunLight);
      
      // Lumi√®re ambiante g√©n√©rale
      const ambientLight = new THREE.AmbientLight(0xffffff, 0.3);
      scene.add(ambientLight);
      
      // Lumi√®re directionnelle pour mieux √©clairer les plan√®tes
      const directionalLight = new THREE.DirectionalLight(0xffffff, 0.4);
      // Repositionner la lumi√®re pour √©viter la surexposition d'une face
      directionalLight.position.set(-1, 0.5, 0.5).normalize();
      scene.add(directionalLight);
      
      // Ajouter une lumi√®re secondaire du c√¥t√© oppos√© pour √©quilibrer l'√©clairage
      const secondaryLight = new THREE.DirectionalLight(0xffffee, 0.2);
      secondaryLight.position.set(1, -0.5, -0.5).normalize();
      scene.add(secondaryLight);
      
      // Ajouter une lumi√®re h√©misph√©rique pour un √©clairage plus doux et naturel
      const hemiLight = new THREE.HemisphereLight(0xffffbb, 0x080820, 0.25);
      scene.add(hemiLight);
    }
    
    /**
     * Cr√©er une couche de lueur pour le soleil
     * Cr√©e une seule couche de lueur pour le soleil
     */
    function createSunGlowLayer(size, color, opacity) {
      const geometry = new THREE.SphereGeometry(size, 32, 32);
      const material = new THREE.MeshBasicMaterial({
        color: color,
        transparent: true,
        opacity: opacity,
        side: THREE.BackSide,
        blending: THREE.AdditiveBlending
      });
      
      return new THREE.Mesh(geometry, material);
    }
    
    /**
     * Cr√©er une texture d'√©clat
     * G√©n√®re une texture pour l'effet d'√©clat du soleil
     */
    function createFlareTexture() {
      const canvas = document.createElement('canvas');
      canvas.width = 512;
      canvas.height = 512;
      const ctx = canvas.getContext('2d');
      
      // Cr√©er un d√©grad√© radial
      const gradient = ctx.createRadialGradient(256, 256, 0, 256, 256, 256);
      gradient.addColorStop(0, 'rgba(255, 255, 255, 1)');
      gradient.addColorStop(0.1, 'rgba(255, 255, 200, 0.8)');
      gradient.addColorStop(0.5, 'rgba(255, 200, 50, 0.3)');
      gradient.addColorStop(1, 'rgba(255, 100, 0, 0)');
      
      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, 512, 512);
      
      // Ajouter des rayons
      for (let i = 0; i < 16; i++) {
        ctx.save();
        ctx.translate(256, 256);
        ctx.rotate(i * Math.PI / 8);
        
        // Dessiner un rayon
        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.lineTo(300, 0);
        ctx.lineWidth = 20;
        
        const rayGradient = ctx.createLinearGradient(0, 0, 300, 0);
        rayGradient.addColorStop(0, 'rgba(255, 255, 255, 0.8)');
        rayGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');
        
        ctx.strokeStyle = rayGradient;
        ctx.stroke();
        
        ctx.restore();
      }
      
      const texture = new THREE.CanvasTexture(canvas);
      return texture;
    }
    
    /**
     * Cr√©er une plan√®te
     * G√©n√®re une plan√®te avec son orbite et son atmosph√®re
     */
    function createPlanet(planetId) {
      const data = planetData[planetId];
      
      // Calculer la distance r√©elle en unit√©s 3D
      const distanceScale = isRealisticScale ? REALISTIC_DISTANCE_SCALE : DISTANCE_SCALE;
      const distance = data.distance * distanceScale;
      
      // Calculer la taille r√©elle en unit√©s 3D, avec exag√©ration pour la visibilit√©
      const sizeExaggeration = isRealisticScale ? REALISTIC_SIZE_EXAGGERATION : SIZE_EXAGGERATION;
      const size = data.size * SIZE_SCALE_BASE * sizeExaggeration;
      
      // Cr√©er l'orbite
      createOrbit(planetId, distance);
      
      // Cr√©er un groupe pour la plan√®te et ses effets
      const planetGroup = new THREE.Group();
      scene.add(planetGroup);
      
      // G√©om√©trie de la plan√®te
      const planetGeometry = new THREE.SphereGeometry(1, isLowPerformance ? 16 : 32, isLowPerformance ? 16 : 32);
      
      // Texture de la plan√®te - traitement sp√©cial pour la Terre
      const planetTexture = loadTexture(data.textureUrl);
      
      // Param√®tres de mat√©riau diff√©rents selon la plan√®te
      let planetMaterial;
      
      if (planetId === 'earth') {
        // Garder le mat√©riau actuel pour la Terre qui fonctionne bien
        planetMaterial = new THREE.MeshStandardMaterial({
          map: planetTexture,
          roughness: 0.9,
          metalness: 0.05
        });
        
        // Si la texture des nuages existe, l'ajouter
        if (data.cloudsUrl) {
          const cloudsTexture = loadTexture(data.cloudsUrl);
          const cloudsGeometry = new THREE.SphereGeometry(1.02, 32, 32);
          const cloudsMaterial = new THREE.MeshPhongMaterial({
            map: cloudsTexture,
            transparent: true,
            opacity: 0.7,
            side: THREE.DoubleSide
          });
          
          const clouds = new THREE.Mesh(cloudsGeometry, cloudsMaterial);
          planetGroup.add(clouds);
          objects[`clouds_${planetId}`] = clouds;
          clouds.scale.set(size, size, size);
        }
      } else if (planetId === 'sun') {
        // Mat√©riau √©missif pour le soleil
        planetMaterial = new THREE.MeshBasicMaterial({
          map: planetTexture,
          color: data.color,
          emissive: data.color,
          emissiveIntensity: 0.4
        });
      } else {
        // Mat√©riau standard pour les autres plan√®tes avec √©missivit√© tr√®s faible pour √©viter la surbrillance
        // R√©duire la luminosit√© pour toutes les plan√®tes sauf la Terre
        const reducedColor = new THREE.Color(data.color).multiplyScalar(0.7); // R√©duction de 30% de la luminosit√©
        
        planetMaterial = new THREE.MeshStandardMaterial({
          map: planetTexture,
          color: reducedColor,
          emissive: new THREE.Color(data.color).multiplyScalar(0.02), // √âmissivit√© encore plus faible
          emissiveIntensity: 0.03,
          roughness: 0.95, // Presque totalement rugueux pour minimiser les reflets
          metalness: 0.05
        });
      }
      
      // Cr√©er la plan√®te
      const planet = new THREE.Mesh(planetGeometry, planetMaterial);
      planetGroup.add(planet);
      
      // Ajouter une atmosph√®re si la plan√®te en a une
      if (data.hasAtmosphere && !isLowPerformance && planetId !== 'earth') {
        const atmosphereSize = 1.05; // 5% plus grande que la plan√®te
        const atmosphereGeometry = new THREE.SphereGeometry(atmosphereSize, 32, 32);
        
        // Atmosph√®re moins visible
        const atmosphereMaterial = new THREE.MeshPhongMaterial({
          color: data.atmosphereColor,
          transparent: true,
          opacity: 0.15,
          side: THREE.DoubleSide,
          blending: THREE.AdditiveBlending,
          emissive: data.atmosphereColor,
          emissiveIntensity: 0.05
        });
        
        const atmosphere = new THREE.Mesh(atmosphereGeometry, atmosphereMaterial);
        planet.add(atmosphere);
        atmospheres[planetId] = atmosphere;
      }
      
      // Ajouter des anneaux pour Saturne et Uranus
      if (data.hasRings && data.ringsUrl) {
        createPlanetRings(planet, data.ringsUrl, size);
      }
      
      // Position initiale sur l'orbite
      const angle = Math.random() * Math.PI * 2;
      planetGroup.position.x = Math.cos(angle) * distance;
      planetGroup.position.z = Math.sin(angle) * distance;
      
      // Appliquer l'√©chelle
      planet.scale.set(size, size, size);
      
      // Ajouter des donn√©es utilisateur pour l'animation
      planetGroup.userData = {
        id: planetId,
        name: data.name,
        orbitRadius: distance,
        orbitSpeed: 0.1 / data.revolutionPeriod * 100, // Vitesse orbitale relative
        angle: angle,
        rotationSpeed: 0.01 / data.rotationPeriod * 1000 // Vitesse de rotation relative
      };
      
      // Ajouter des donn√©es utilisateur √† la plan√®te elle-m√™me pour l'interaction
      planet.userData = {
        id: planetId,
        name: data.name
      };
      
      // Ajouter une lumi√®re tr√®s faible pour les plan√®tes distantes
      if (planetId !== 'sun' && planetId !== 'earth' && data.distance > 3) {
        const planetLight = new THREE.PointLight(0xffffff, 0.05, size * 2);
        planet.add(planetLight);
      }
      
      planets[planetId] = planet;
      objects[`planetGroup_${planetId}`] = planetGroup;
    }
    
    /**
     * Cr√©er des anneaux de plan√®te
     * G√©n√®re des anneaux pour des plan√®tes comme Saturne
     */
    function createPlanetRings(planet, ringsUrl, planetSize) {
      // Charger la texture des anneaux (toujours g√©n√©r√©e localement pour plus de fiabilit√©)
      const ringsTexture = generateTexture(ringsUrl);
      
      // Cr√©er la g√©om√©trie des anneaux
      // Rayon int√©rieur, rayon ext√©rieur, segments
      const ringsGeometry = new THREE.RingGeometry(1.4, 2.5, 64);
      
      // Modifier les UVs pour mapper correctement la texture sur l'anneau
      const pos = ringsGeometry.attributes.position;
      const v3 = new THREE.Vector3();
      const uv = ringsGeometry.attributes.uv;
      
      for (let i = 0; i < pos.count; i++) {
        v3.fromBufferAttribute(pos, i);
        uv.setXY(
          i,
          (v3.x / 2.5 + 0.5),
          (v3.y / 2.5 + 0.5)
        );
      }
      
      // Cr√©er le mat√©riau des anneaux avec √©missivit√© pour plus de visibilit√©
      const ringsMaterial = new THREE.MeshBasicMaterial({
        map: ringsTexture,
        transparent: true,
        side: THREE.DoubleSide,
        emissive: 0xffffff,
        emissiveIntensity: 0.2
      });
      
      // Cr√©er le maillage des anneaux
      const rings = new THREE.Mesh(ringsGeometry, ringsMaterial);
      rings.rotation.x = Math.PI / 2;
      rings.scale.set(planetSize, planetSize, planetSize);
      
      // Ajouter une l√©g√®re √©mission de lumi√®re aux anneaux
      const ringsLight = new THREE.PointLight(0xffffff, 0.2, planetSize * 3);
      rings.add(ringsLight);
      
      planet.add(rings);
    }
    
    /**
     * Cr√©er une orbite
     * G√©n√®re le chemin orbital pour une plan√®te
     */
    function createOrbit(planetId, distance) {
      const segments = isLowPerformance ? 64 : 128;
      const orbitGeometry = new THREE.RingGeometry(distance - 0.05, distance + 0.05, segments);
      const orbitMaterial = new THREE.MeshBasicMaterial({
        color: 0x00ccff,
        transparent: true,
        opacity: 0.5,
        side: THREE.DoubleSide
      });
      
      const orbit = new THREE.Mesh(orbitGeometry, orbitMaterial);
      orbit.rotation.x = Math.PI / 2;
      orbit.visible = showOrbitLines;
      scene.add(orbit);
      orbitLines[planetId] = orbit;
    }
    
    /**
     * Cr√©er une comparaison des plan√®tes
     * G√©n√®re une comparaison visuelle des tailles des plan√®tes
     */
    function createPlanetComparison() {
      const container = document.getElementById('planet-comparison-content');
      container.innerHTML = '';
      
      // Trier les plan√®tes par taille
      const sortedPlanets = Object.keys(planetData)
        .map(id => ({ id, ...planetData[id] }))
        .sort((a, b) => b.size - a.size);
      
      // Cr√©er les √©l√©ments de comparaison
      sortedPlanets.forEach(planet => {
        const item = document.createElement('div');
        item.className = 'planet-comparison-item';
        
        // Calculer la taille d'affichage (proportionnelle √† la taille r√©elle)
        const maxHeight = 100; // Hauteur maximale en pixels
        const height = (planet.size / sortedPlanets[0].size) * maxHeight;
        
        const sphere = document.createElement('div');
        sphere.className = 'planet-comparison-sphere';
        
        // Utiliser la texture de la plan√®te pour le fond
        if (planet.id === 'earth') {
          // Pour la Terre, utiliser directement l'URL de la texture
          sphere.style.backgroundImage = `url(${planet.textureUrl})`;
        } else {
          // Pour les autres plan√®tes, cr√©er une texture proc√©durale et l'ajouter √† l'√©l√©ment
          const canvas = document.createElement('canvas');
          canvas.width = 128;
          canvas.height = 128;
          const ctx = canvas.getContext('2d');
          
          // Utiliser la m√™me fonction que pour les textures 3D mais √† taille r√©duite
          let bgColor;
          
          switch (planet.id) {
            case 'sun':
              bgColor = '#ffcc33';
              break;
            case 'mercury':
              bgColor = '#aaa';
              break;
            case 'venus':
              bgColor = '#e6c378';
              break;
            case 'mars':
              bgColor = '#c1440e';
              break;
            case 'jupiter':
              bgColor = '#c18f5a';
              break;
            case 'saturn':
              bgColor = '#e8d1a7';
              break;
            case 'uranus':
              bgColor = '#c9f2f5';
              break;
            case 'neptune':
              bgColor = '#3a5cc9';
              break;
            default:
              bgColor = '#fff';
          }
          
          // Dessiner un cercle de la couleur de la plan√®te
          ctx.fillStyle = bgColor;
          ctx.beginPath();
          ctx.arc(64, 64, 64, 0, Math.PI * 2);
          ctx.fill();
          
          // Ajouter quelques d√©tails selon la plan√®te
          if (planet.id === 'jupiter' || planet.id === 'saturn') {
            // Bandes horizontales pour les g√©antes gazeuses
            for (let y = 20; y < 100; y += 20) {
              ctx.fillStyle = `rgba(0, 0, 0, 0.1)`;
              ctx.fillRect(10, y, 108, 10);
            }
          } else if (planet.id === 'mars') {
            // Taches rouges pour Mars
            ctx.fillStyle = 'rgba(170, 30, 0, 0.3)';
            ctx.beginPath();
            ctx.arc(40, 40, 20, 0, Math.PI * 2);
            ctx.fill();
          } else if (planet.id === 'uranus' || planet.id === 'neptune') {
            // Couleur uniforme pour les g√©antes de glace
            ctx.fillStyle = planet.id === 'uranus' ? 'rgba(200, 255, 255, 0.3)' : 'rgba(100, 100, 255, 0.3)';
            ctx.beginPath();
            ctx.arc(64, 64, 40, 0, Math.PI * 2);
            ctx.fill();
          }
          
          // Utiliser l'URL de donn√©es pour l'image g√©n√©r√©e
          const dataUrl = canvas.toDataURL('image/png');
          sphere.style.backgroundImage = `url(${dataUrl})`;
        }
        
        sphere.style.width = `${height}px`;
        sphere.style.height = `${height}px`;
        
        const name = document.createElement('div');
        name.className = 'planet-comparison-name';
        name.textContent = planet.name;
        
        item.appendChild(sphere);
        item.appendChild(name);
        container.appendChild(item);
      });
    }
    
    /**
     * Activer/d√©sactiver la comparaison des plan√®tes
     * Affiche ou masque le panneau de comparaison des tailles des plan√®tes
     */
    function togglePlanetComparison() {
      planetComparison.classList.toggle('visible');
      showNotification(planetComparison.classList.contains('visible') ? 
        "Comparaison des tailles affich√©e" : "Comparaison des tailles masqu√©e");
    }
    
    /**
     * Boucle d'animation
     * Boucle de rendu principale qui met √† jour tous les objets
     */
    function animate() {
      requestAnimationFrame(animate);
      
      const delta = clock.getDelta() * timeScale;
      const elapsedTime = clock.getElapsedTime();
      
      // Calcul des FPS
      frameCount++;
      if (elapsedTime - lastTime >= 1) {
        fps = Math.round(frameCount / (elapsedTime - lastTime));
        fpsCounter.textContent = `FPS: ${fps}`;
        frameCount = 0;
        lastTime = elapsedTime;
      }
      
      // Mise √† jour des contr√¥les
      if (controls) controls.update();
      
      // Animation du soleil
      if (objects.sun) {
        objects.sun.rotation.y += delta * 0.1;
      }
      
      // Animation des plan√®tes
      for (const planetId in planetData) {
        if (planetId === 'sun') continue;
        
        const planetGroup = objects[`planetGroup_${planetId}`];
        const planet = planets[planetId];
        
        if (planetGroup && planet) {
          // Rotation de la plan√®te sur elle-m√™me
          planet.rotation.y += delta * planetGroup.userData.rotationSpeed;
          
          // Orbite autour du soleil
          planetGroup.userData.angle += delta * planetGroup.userData.orbitSpeed;
          planetGroup.position.x = Math.cos(planetGroup.userData.angle) * planetGroup.userData.orbitRadius;
          planetGroup.position.z = Math.sin(planetGroup.userData.angle) * planetGroup.userData.orbitRadius;
          
          // Animer les nuages de la Terre s'ils existent
          if (planetId === 'earth' && objects[`clouds_${planetId}`]) {
            objects[`clouds_${planetId}`].rotation.y += delta * 0.2; // Les nuages tournent plus vite que la plan√®te
          }
        }
      }
      
      // Animation des √©toiles
      if (objects.stars) {
        objects.stars.rotation.y += delta * 0.001;
      }
      
      // Mettre √† jour la position de l'√©tiquette de la plan√®te si une plan√®te est survol√©e
      if (hoveredPlanet && showLabels && !isZooming) {
        const planetScreenPosition = getScreenPosition(hoveredPlanet);
        planetLabel.style.left = `${planetScreenPosition.x}px`;
        planetLabel.style.top = `${planetScreenPosition.y - 30}px`;
      }
      
      // Rendu de la sc√®ne avec post-processing
      composer.render();
    }

    // D√©marrer l'application au chargement de la page
    window.addEventListener('load', startApp);
  </script>
</body>
</html>
